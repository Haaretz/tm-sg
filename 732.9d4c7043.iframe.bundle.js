(self.webpackChunk_haaretz_a_tm_sg=self.webpackChunk_haaretz_a_tm_sg||[]).push([[732],{"../../config/l-storybook-config/wwwroot/public/configShim.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>configShim});const configShim_namespaceObject=JSON.parse('{"brightspot":"https://www.haaretz.co.il","gqlServer":"https://graphql-server.haaretz.co.il","gqlServerCluster":"http://graphql-server.haaretz.co.il","bIServer":"https://services.haaretz.co.il/ds","env":"prod","msConfirmation":"https://services.haaretz.co.il/ms-confirmation","msPurchaseUrl":"https://ms-purchase.haaretz.co.il","cookieGenerator":"http://cookie-generator.ms-app","appType":"promotions-page","GA4Key":"G-V6JW03P6HP","UAKey":"UA-589309-3"}'),configShim={getSafe(property){const keys=Array.isArray(property)?property:property.split(".");let key,value=configShim_namespaceObject;for(;keys.length;){if(null===value||"object"!=typeof value){value=void 0;break}key=keys.shift(),value=value[key]}return value},get(property){const keyPath=Array.isArray(property)?property.join("."):property,value=this.getSafe(property);if(void 0===value)throw new Error(`Configuration property "${keyPath}" is not defined`);return value},has(property){return null!=property&&void 0!==this.getSafe(property)}}},"../../graphql/s-graphql-fetcher/src/GraphqlFetcher.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>fetcherFactory});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),src=__webpack_require__("../../shared/s-consts/src/index.ts"),configShim=__webpack_require__("../../config/l-storybook-config/wwwroot/public/configShim.js"),sha256=__webpack_require__("../../../node_modules/.pnpm/crypto-js@4.1.1/node_modules/crypto-js/sha256.js"),sha256_default=__webpack_require__.n(sha256),enc_hex=__webpack_require__("../../../node_modules/.pnpm/crypto-js@4.1.1/node_modules/crypto-js/enc-hex.js"),enc_hex_default=__webpack_require__.n(enc_hex);const src_getOperationName=function getOperationName(doc){var _doc$definitions;const defenitions=null==doc||null===(_doc$definitions=doc.definitions)||void 0===_doc$definitions?void 0:_doc$definitions.filter((definition=>"OperationDefinition"===definition.kind&&definition.name));return(null==defenitions?void 0:defenitions.map((x=>{var _x$name;return null==x||null===(_x$name=x.name)||void 0===_x$name?void 0:_x$name.value}))[0])||null};const src_getOperationType=function getOperationType(doc){var _doc$definitions;const defenition=null==doc||null===(_doc$definitions=doc.definitions)||void 0===_doc$definitions?void 0:_doc$definitions.find((definition=>"OperationDefinition"===definition.kind));return(null==defenition?void 0:defenition.operation)||"query"};var parser=__webpack_require__("../../../node_modules/.pnpm/graphql@16.6.0/node_modules/graphql/language/parser.mjs");const src_parseQuery=function parseQuery(query){try{return(0,parser.Qc)(query)}catch(err){return console.error(err.message),null}};var breakUrl=__webpack_require__("../../utils/s-url-utils/src/breakUrl/index.ts");const src_getHtzHostname=function getHtzHostname(url){const{hostname}=(0,breakUrl.Z)(url),[,htzHostname]=/(?:.+)?((?:\.)?(?:haaretz|themarker)(?:\.co\.il|\.com))/.exec(hostname)||[];if(!htzHostname)throw new Error(`Something went wrong, htz hostname of ${hostname} not found`);return htzHostname};const src_switchToDomain=function switchToDomain(url,replaceTo){const newHostname=src_getHtzHostname(replaceTo),hostname=src_getHtzHostname(url);if("string"==typeof url){return url.replace(hostname,newHostname)}const result=url.hostname.replace(hostname,newHostname);return url.hostname=result,url},_excluded=["host","connection"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const gqlServerKey="undefined"==typeof window?"gqlServerCluster":"gqlServer",gqlServerUrl=configShim.Z.get(gqlServerKey),hostname=`www.${src.Kn}`;function fetcherFactory(query,variables,headers,options={}){return async function fetcher(context){try{const document=src_parseQuery(query),operationName=document&&src_getOperationName(document)||"",operationType=document&&src_getOperationType(document)||"",url=gqlServerUrl.startsWith("https://")?src_switchToDomain(gqlServerUrl,"themarker.com"):gqlServerUrl,sha256Hash=sha256_default()(query).toString(enc_hex_default()),{signal}=context||{},params={operationName,variables:JSON.stringify(variables||{}),extensions:JSON.stringify({persistedQuery:{version:1,sha256Hash}})},_ref=_objectSpread(_objectSpread({},headers||{}),{},{"content-type":"application/json",accept:"application/json",hostname}),{host,connection}=_ref,defaultHeaders=(0,objectWithoutProperties.Z)(_ref,_excluded),queryParams=new URLSearchParams(params);if("query"===operationType){const persistedResult=await fetch(`${url}?${queryParams.toString()}`,_objectSpread({credentials:"include",method:"GET",headers:defaultHeaders,signal},options));if(persistedResult.status<400){var _persistendData$error;const persistendData=await persistedResult.json();if(null==persistendData||null===(_persistendData$error=persistendData.errors)||void 0===_persistendData$error||!_persistendData$error.some((error=>"PersistedQueryNotFound"===error.message)))return persistendData.data}}const result=await fetch(`${url}?operation=${operationName}`,_objectSpread({method:"POST",credentials:"include",headers:defaultHeaders,body:JSON.stringify({query,variables:JSON.parse(queryParams.get("variables")||""),operationName,extensions:JSON.parse(queryParams.get("extensions")||"")}),signal},options)),json=await result.json();if(json.errors){const{message}=json.errors[0]||{};throw new Error(message||"Error…")}return json.data}catch(error){throw console.error(`GraphQL fetcher error: ${error.message}`),error}}}},"../../hooks/s-use-user/src/use-user/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../hooks/s-use-user/src/use-user/useUser.tsx").Z},"../../hooks/s-use-user/src/use-user/useUser.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>use_user_useUser});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),useQuery=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.24.4_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),cookieToMap=__webpack_require__("../../utils/s-cookie-utils/src/cookieToMap/index.ts");const src_isValidSsoMap=function isValidSsoMap(ssoMap){return!!(ssoMap&&void 0!==ssoMap&&"object"==typeof ssoMap&&"string"==typeof ssoMap.userName&&"string"==typeof ssoMap.userName&&/\S+@\S+\.\S+/.test(ssoMap.userName))};var src=__webpack_require__("../../shared/s-consts/src/index.ts");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const src_createUser=function createUser(cookieVal,forceRefresh=!1){const cookieMap=(0,cookieToMap.Z)(cookieVal,forceRefresh),ssoMap=null==cookieMap?void 0:cookieMap._hs_ud,anonymousId=cookieMap.anonymousId;let userOptions=src.Bt;return ssoMap&&"object"==typeof ssoMap&&src_isValidSsoMap(ssoMap)&&(userOptions=_objectSpread(_objectSpread({},userOptions),ssoMap)),"string"==typeof anonymousId&&(userOptions=_objectSpread(_objectSpread({},userOptions),{},{anonymousId})),userOptions};__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.24.4_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/useInfiniteQuery.mjs");var GraphqlFetcher=__webpack_require__("../../graphql/s-graphql-fetcher/src/GraphqlFetcher.tsx");const UserTypePersonalQueryDocument="\n    query UserTypePersonalQuery($site: Site!) {\n  user {\n    type(site: $site)\n    extendedType(site: $site)\n  }\n}\n    ",useUserTypePersonalQuery=(variables,options)=>(0,useQuery.a)(["UserTypePersonalQuery",variables],(0,GraphqlFetcher.Z)(UserTypePersonalQueryDocument,variables),options);useUserTypePersonalQuery.document=UserTypePersonalQueryDocument,useUserTypePersonalQuery.getKey=variables=>["UserTypePersonalQuery",variables];function useUser_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function useUser_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?useUser_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useUser_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}useUserTypePersonalQuery.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(UserTypePersonalQueryDocument,variables,options);const userCacheKey=["HtzUser"];function userDispenserFactory(cookie,types){return function userDispenser(){const newUser=src_createUser(cookie,!0);return useUser_objectSpread(useUser_objectSpread(useUser_objectSpread({},newUser),types),{},{isLoggedIn:!!newUser.userName})}}function useUser(options){return(0,useQuery.a)(userCacheKey,(async()=>{let result=userDispenserFactory("undefined"!=typeof document?document.cookie:"",src.Bt)();if(!result.isLoggedIn)return result;const userTypes=await function getUserType(isLoggedIn){return new Promise((resolve=>"undefined"!=typeof window&&isLoggedIn?useUserTypePersonalQuery.fetcher({site:src.pq})().then((data=>null!=data&&data.user?resolve(data.user):resolve(src.Bt))).catch((error=>(console.error(error.message),resolve(src.Bt)))):resolve(src.Bt)))}(result.isLoggedIn);return result=userDispenserFactory("undefined"!=typeof document?document.cookie:"",userTypes)(),result}),options)}useUser.cacheKey=userCacheKey,useUser.userDispenserFactory=userDispenserFactory;const use_user_useUser=useUser;try{useUser.displayName="useUser",useUser.__docgenInfo={description:"",displayName:"useUser",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../hooks/s-use-user/src/use-user/useUser.tsx#useUser"]={docgenInfo:useUser.__docgenInfo,name:"useUser",path:"../../hooks/s-use-user/src/use-user/useUser.tsx#useUser"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-hooks/s-use-pp-data-store/src/usePPDataStore.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>PPDataStoreContextProvider,vA:()=>usePPCouponStore,JV:()=>usePPDataStore,Z_:()=>usePPDataStoreActions,c:()=>usePPUpdateCouponStore,NJ:()=>usePpDataStoreInitialization});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.1/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.2_next@13.2.3+react@18.2.0/node_modules/next-router-mock/dist/index.js"),src=__webpack_require__("../../shared/s-consts/src/index.ts");const src_removeQueryParam=function removeQueryParam(param,router){const{pathname,query}=router,params=new URLSearchParams(query);params.delete(param),router.replace({pathname,query:params.toString()},void 0,{shallow:!0})};var __jsx=react.createElement;function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const getPPDataStoreActionsContext=function actionsContextFactory(){const Context=react.createContext(void 0);return function(){return Context}}(),getPPDataStoreContext=function dataContextFactory(){const Context=react.createContext(void 0);return function(){return Context}}(),PPCouponStoreContext=react.createContext(void 0),PPCouponUpdateStoreContext=react.createContext(void 0);function PPDataStoreContextProvider({children,initialState}){const[store,setStore]=react.useState(initialState||{}),[coupon,setCoupon]=react.useState(null),storeActions=react.useMemo((()=>({updateStore:newState=>{setStore((prevState=>_objectSpread(_objectSpread({},prevState),newState)))},clearStore:field=>setStore((prevState=>{if(field){const{[field]:deleted}=prevState;return(0,objectWithoutProperties.Z)(prevState,[field].map(_toPropertyKey))}return{referrer:prevState.referrer}}))})),[]);react.useEffect((()=>{const referrer=document.referrer;referrer&&!store.referrer&&storeActions.updateStore({referrer})}),[storeActions,store.referrer]);const PPDataStoreContext=getPPDataStoreContext(),PPDataStoreActionsContext=getPPDataStoreActionsContext();return __jsx(PPCouponStoreContext.Provider,{value:coupon},__jsx(PPCouponUpdateStoreContext.Provider,{value:setCoupon},__jsx(PPDataStoreContext.Provider,{value:store},__jsx(PPDataStoreActionsContext.Provider,{value:storeActions},children))))}function usePPDataStore(){const context=react.useContext(getPPDataStoreContext());if(!context)throw new Error("usePPDataStore must be used within a PPDataStoreContextProvider");return context}function usePPDataStoreActions(){const context=react.useContext(getPPDataStoreActionsContext());if(!context)throw new Error("usePPDataStoreActions must be used within a PPDataStoreActionsContextProvider");return context}function usePPCouponStore(){const context=react.useContext(PPCouponStoreContext);if(void 0===context)throw new Error("usePPCouponStore must be used within a PPCouponStoreContext");return context}function usePPUpdateCouponStore(){const context=react.useContext(PPCouponUpdateStoreContext);if(!context)throw new Error("usePPUpdateCouponStore must be used within a PPCouponUpdateStoreContext");return context}function usePpDataStoreInitialization(){const store=usePPDataStore(),{updateStore}=usePPDataStoreActions(),router=(0,dist.useRouter)();react.useEffect((()=>{if(!store.contentId){const storeDataFromUrl=router.query.storeData,storeString="string"==typeof storeDataFromUrl?decodeURIComponent(storeDataFromUrl):sessionStorage.getItem(src.Mc);if(storeString)try{const restoredStore=JSON.parse(storeString);restoredStore&&updateStore(_objectSpread({},restoredStore)),sessionStorage.removeItem(src.Mc),storeDataFromUrl&&src_removeQueryParam("storeData",router)}catch(error){console.error(error.message)}}}),[router,store,updateStore])}try{usePPDataStore.displayName="usePPDataStore",usePPDataStore.__docgenInfo={description:"",displayName:"usePPDataStore",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"PPDataStoreContextProps | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-hooks/s-use-pp-data-store/src/usePPDataStore.tsx#usePPDataStore"]={docgenInfo:usePPDataStore.__docgenInfo,name:"usePPDataStore",path:"../../pp-hooks/s-use-pp-data-store/src/usePPDataStore.tsx#usePPDataStore"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-hooks/s-use-pp-offset-steps-store/src/usePPStepsOffsetStore.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Qf:()=>usePPOffsetStepsStoreActions,R8:()=>usePpPrevStepInitialization,ZP:()=>PPOffsetStepsStoreContextProvider,np:()=>usePPOffsetStepsStore,q9:()=>usePPPrevStepsStore,v:()=>usePPPrevStepsStoreActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_haaretz_s_use_user_use_user__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../hooks/s-use-user/src/use-user/index.ts"),next_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.2_next@13.2.3+react@18.2.0/node_modules/next-router-mock/dist/index.js"),_haaretz_s_pp_routing_utils_getCurrentStepName__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/getCurrentStepName/index.ts"),_haaretz_s_pp_routing_utils_isGqlPpStep__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/isGqlPpStep/index.ts"),_haaretz_s_consts__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../shared/s-consts/src/index.ts"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const OffsetStepsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0),PrevStepsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0),UdapteOffsetStepsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0),UdaptePrevStepsContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);function PPOffsetStepsStoreContextProvider({children,initialState}){var _user$data3;const[prevSteps,setPrevSteps]=react__WEBPACK_IMPORTED_MODULE_0__.useState([]),[offsetSteps,setOffsetSteps]=react__WEBPACK_IMPORTED_MODULE_0__.useState(initialState||[]),isFilledRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef((null==initialState?void 0:initialState.includes("login"))||!1),user=(0,_haaretz_s_use_user_use_user__WEBPACK_IMPORTED_MODULE_2__.Z)(),router=(0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)(),offsetStepsActions=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({pushStep:step=>{if(!isFilledRef.current){var _user$data,_user$data2;const isLoggedInOnOffersPage=(null===(_user$data=user.data)||void 0===_user$data?void 0:_user$data.userName)&&"offers"===step;null!==(_user$data2=user.data)&&void 0!==_user$data2&&_user$data2.userName&&"login"!==step&&!isLoggedInOnOffersPage||(("login"===step||isLoggedInOnOffersPage)&&(isFilledRef.current=!0),setOffsetSteps((prevState=>[...prevState,step])))}},clearSteps:()=>{setOffsetSteps([]),isFilledRef.current=!1}})),[null===(_user$data3=user.data)||void 0===_user$data3?void 0:_user$data3.userName]),prevStepsActions=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({pushPrevStep:step=>{(0,_haaretz_s_pp_routing_utils_isGqlPpStep__WEBPACK_IMPORTED_MODULE_3__.Z)(step)&&setPrevSteps((prevState=>prevState.includes(step)?prevState:[...prevState,step]))},pushPrevSteps:steps=>{prevSteps.length<=1&&steps.length&&setPrevSteps((prevState=>[...steps.filter(_haaretz_s_pp_routing_utils_isGqlPpStep__WEBPACK_IMPORTED_MODULE_3__.Z).filter((step=>!prevState.includes(step))),...prevState]))},getPrevSteps:()=>prevSteps})),[prevSteps]),resultOffsetSteps=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const currentStepName=(0,_haaretz_s_pp_routing_utils_getCurrentStepName__WEBPACK_IMPORTED_MODULE_4__.Z)(router.pathname);return isFilledRef.current&&"offers"!==currentStepName&&"coupon"!==currentStepName?offsetSteps:[]}),[offsetSteps,router.pathname]);return __jsx(OffsetStepsContext.Provider,{value:resultOffsetSteps},__jsx(PrevStepsContext.Provider,{value:prevSteps},__jsx(UdapteOffsetStepsContext.Provider,{value:offsetStepsActions},__jsx(UdaptePrevStepsContext.Provider,{value:prevStepsActions},children))))}function usePPOffsetStepsStore(){const context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(OffsetStepsContext);if(!context)throw new Error("usePPOffsetStepsStore must be used within a PPOffsetStepsStoreContextProvider");return context}function usePPPrevStepsStore(){const context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(PrevStepsContext);if(!context)throw new Error("usePPPrevStepsStore must be used within a PPOffsetStepsStoreContextProvider");return context}function usePPOffsetStepsStoreActions(){const context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(UdapteOffsetStepsContext);if(!context)throw new Error("usePPOffsetStepsStoreActions must be used within a PPOffsetStepsStoreContextProvider");return context}function usePPPrevStepsStoreActions(){const context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(UdaptePrevStepsContext);if(!context)throw new Error("usePPPrevStepsStoreActions must be used within a PPOffsetStepsStoreContextProvider");return context}function usePpPrevStepInitialization(){const prevSteps=usePPPrevStepsStore(),{pushPrevSteps}=usePPPrevStepsStoreActions(),router=(0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{const prevPagesString=sessionStorage.getItem(_haaretz_s_consts__WEBPACK_IMPORTED_MODULE_5__.UB);if(prevPagesString)try{const prevPages=JSON.parse(prevPagesString);if(Array.isArray(prevPages)){const stepName=(0,_haaretz_s_pp_routing_utils_getCurrentStepName__WEBPACK_IMPORTED_MODULE_4__.Z)(router.pathname);pushPrevSteps([...prevPages,stepName])}sessionStorage.removeItem(_haaretz_s_consts__WEBPACK_IMPORTED_MODULE_5__.UB)}catch(error){console.error(error.message)}}),[prevSteps,pushPrevSteps,router.pathname])}try{usePPStepsOffsetStore.displayName="usePPStepsOffsetStore",usePPStepsOffsetStore.__docgenInfo={description:"",displayName:"usePPStepsOffsetStore",props:{initialState:{defaultValue:null,description:"",name:"initialState",required:!1,type:{name:"PurchasePageSteps[] | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-hooks/s-use-pp-offset-steps-store/src/usePPStepsOffsetStore.tsx#usePPStepsOffsetStore"]={docgenInfo:usePPStepsOffsetStore.__docgenInfo,name:"usePPStepsOffsetStore",path:"../../pp-hooks/s-use-pp-offset-steps-store/src/usePPStepsOffsetStore.tsx#usePPStepsOffsetStore"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-utils/s-pp-routing-utils/src/getCurrentStepName/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCurrentStepName});const src_getCurrentStepName=function getCurrentStepName(pathname){return pathname.startsWith("/")?pathname.slice(1):pathname}},"../../pp-utils/s-pp-routing-utils/src/isGqlPpStep/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_isGqlPpStep});const validGqlPpSteps={debt:!0,login:!0,offers:!0,payment:!0,specialMax:!0,specialSubscription:!0,thankYou:!0,updateDetails:!0,validSubscription:!0,coupon:!1,error:!1,changeSuccess:!1,paymentChange:!1};const src_isGqlPpStep=function isGqlPpStep(step){return validGqlPpSteps[step]||!1}},"../../shared/s-consts/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Aq:()=>currency,Bt:()=>defaultUser,Kn:()=>hostname,Mc:()=>PP_STORE_DATA_KEY,OE:()=>siteId,TQ:()=>defaultNetworkErrorMessage,UB:()=>PP_PREV_STEPS_KEY,Z:()=>defaultPpErrorMessage,pq:()=>siteAlias});var _haaretz_s_common_utils_capitalize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../utils/s-common-utils/src/capitalize/index.ts");const hostname="themarker.com",UserTypes_anonymous="anonymous",defaultUser={anonymousId:"",type:UserTypes_anonymous,extendedType:(0,_haaretz_s_common_utils_capitalize__WEBPACK_IMPORTED_MODULE_0__.Z)(UserTypes_anonymous)},siteId=10,defaultNetworkErrorMessage="לא הצלחנו לקבל תשובה מהשרת, אנא נסו שוב.",siteAlias="TM",defaultPpErrorMessage={action:0,cta:"",ctaType:"button",link:"",messageType:"GENERAL_ERROR",instructions:"לא ניתן לסיים את התהליך כעת. אנא נסו לבצע את התהליך שנית בעוד מספר דקות. במידה והבעיה חוזרת על עצמה, אנא פנו לשירות לקוחות.",title:"אופס! אירעה תקלה"},PP_STORE_DATA_KEY="pp-store-data",currency="ILS",PP_PREV_STEPS_KEY="pp-prev-steps"},"../../utils/s-common-utils/src/capitalize/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function capitalize(str){return str.replace(/\b[a-z]/gi,(function(char){return char.toUpperCase()}))}__webpack_require__.d(__webpack_exports__,{Z:()=>src_capitalize});try{capitalize.displayName="capitalize",capitalize.__docgenInfo={description:"",displayName:"capitalize",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../utils/s-common-utils/src/capitalize/capitalize.tsx#capitalize"]={docgenInfo:capitalize.__docgenInfo,name:"capitalize",path:"../../utils/s-common-utils/src/capitalize/capitalize.tsx#capitalize"})}catch(__react_docgen_typescript_loader_error){}const src_capitalize=capitalize},"../../utils/s-common-utils/src/decodeUnicodeBase64/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>decodeUnicodeBase64});const decodeUnicodeBase64=function b64DecodeUnicode(str){return"undefined"==typeof document?Buffer.from(str,"base64").toString("utf-8"):decodeURIComponent(Array.prototype.map.call(atob(str),(function(c){return`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`})).join(""))}},"../../utils/s-common-utils/src/discardNullableValues/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_discardNullableValues});const src_discardNullableValues=obj=>{const result={};for(const key in obj)null!==obj[key]&&void 0!==obj[key]&&(result[key]=obj[key]);return result}},"../../utils/s-cookie-utils/src/cookieToMap/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_cookieToMap});var decodeUnicodeBase64=__webpack_require__("../../utils/s-common-utils/src/decodeUnicodeBase64/index.ts");function stringToMap(str,{separator=/;\s*/,operator="="}={}){const map=Object.create(null);if("string"!=typeof str)throw new Error(`Parameter 'str' must be string, current value is ${str}`);if(!(separator instanceof RegExp))throw new Error(`Parameter 'Separator' must be instance of RegExp, current value is ${separator}`);if("string"!=typeof operator)throw new Error(`Parameter 'operator' must be string, current value is ${operator}`);return str.split(separator).forEach((element=>{if("string"==typeof element){const splitPos=element.indexOf(operator),keyValue=[element.substring(0,splitPos),element.substring(splitPos+1)];try{keyValue[0]&&(map[keyValue[0]]=decodeURIComponent(keyValue[1]))}catch(error){console.error(error.message)}}})),map}let cookieAsMap;const src_cookieToMap=function cookieToMap(cookieVal,forceRefresh=!1){if(!cookieAsMap||forceRefresh){if(cookieAsMap=stringToMap(cookieVal,{separator:/;\s?/}),"string"==typeof cookieAsMap._hs_ud)try{cookieAsMap._hs_ud=stringToMap((0,decodeUnicodeBase64.Z)(cookieAsMap._hs_ud),{separator:/:\s?/})}catch(error){console.error(error.message)}if("string"==typeof cookieAsMap["promotions-response-message"])try{cookieAsMap.ppResponseMessage=JSON.parse(cookieAsMap["promotions-response-message"])}catch(error){console.error(error.message)}}return cookieAsMap}},"../../utils/s-url-utils/src/breakUrl/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>src_breakUrl});const src_breakUrl=function breakUrl(url){if(!("string"==typeof url)||url.indexOf("://")>0||0===url.indexOf("//")){const{href,origin,protocol,username,password,hostname,port,pathname,search,hash,host,searchParams,toString}=new URL(url);return{href,origin,protocol,username,password,hostname,port,pathname,search,hash,host,searchParams,toString}}return function breakRelativeUrl(url){const[href="",origin="",protocol="",username="",password="",hostname="",,,port="",pathname="",search="",hash=""]=/^((?:(ws|https?)(?::\/\/))?(?:(\w.*):(.+?)@)?(([^\s?#/]+?)\.([^\s?#/]+?))?(?::(\d{2,5}))?)?(\/[^\s?#]*?)?(?:\/?(\?[^\s#]+?))?(#.+)?$/.exec(url)||[];return{href,origin,protocol,username,password,hostname,port,pathname,search,hash,host:hostname+port?`:${port}`:"",searchParams:new URLSearchParams(search),toString:url.toString}}(url)}},"?8823":()=>{}}]);
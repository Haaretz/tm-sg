"use strict";(self.webpackChunk_haaretz_a_tm_sg=self.webpackChunk_haaretz_a_tm_sg||[]).push([[5839],{"../../pp-pages/s-pp-login-page/src/PpLoginPage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Overview:()=>Overview,default:()=>PpLoginPage_stories});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),jsx_runtime=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),preview=__webpack_require__("../../config/l-storybook-config/preview.js"),src=__webpack_require__("../../utils/s-pp-storybook-providers/src/index.ts"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),lib=__webpack_require__("../../../node_modules/.pnpm/@mdx-js+react@2.3.0_react@18.2.0/node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("../../../node_modules/.pnpm/@storybook+addon-docs@7.4.6_@types+react-dom@18.2.11_@types+react@18.2.25_react-dom@18.2.0_react@18.2.0/node_modules/@storybook/addon-docs/dist/index.mjs");function _createMdxContent(props){const _components=Object.assign({h1:"h1",h2:"h2",p:"p",strong:"strong",code:"code",pre:"pre",h3:"h3"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"pploginpage",children:"PpLoginPage"}),"\n",(0,jsx_runtime.jsx)("br",{}),"\n","\n","\n","\n",(0,jsx_runtime.jsx)(_components.h2,{id:"installation",children:"Installation"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsxs)(_components.strong,{children:["Make sure the package you use ",(0,jsx_runtime.jsx)(_components.code,{children:"PpLoginPage"})," in has ",(0,jsx_runtime.jsx)(_components.code,{children:"@haaretz/s-pp-login-page"}),"\nlisted in its ",(0,jsx_runtime.jsx)(_components.code,{children:"package.json"}),"'s ",(0,jsx_runtime.jsx)(_components.code,{children:"dependencies"})," field:"]})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-js",children:'// package.json\n{\n  // ...\n  "dependencies": {\n    "@haaretz/s-pp-login-page": "workspace:*"\n    // ...\n  }\n}\n'})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Because internal monorepo packages are wired up using TypeScript's path aliases\nfeature in dev mode, importing ",(0,jsx_runtime.jsx)(_components.code,{children:"PpLoginPage"})," without listing it as a dependency\nwill work in dev mode, but will fail in production. There should be a\n",(0,jsx_runtime.jsx)(_components.code,{children:"import/no-unresolved"})," eslint error when trying to import it when it is not\nlisted as a dependency."]}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"You can then import it like this:"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-js",children:"import PpLoginPage from '@haaretz/s-pp-login-page';\n"})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"overview",children:"Overview"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:" Purchase app offers page"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{withToolbar:!0,children:(0,jsx_runtime.jsx)(dist.oG,{id:"purchase/pages-PpLoginPage--overview"})}),"\n",(0,jsx_runtime.jsx)(_components.h3,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(dist.$4,{story:"^"}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"variants",children:"Variants"}),"\n"]})}const PpLoginPage_doc=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)},loginPageMockData={__typename:"Query",PurchasePage:{__typename:"PurchasePage",pageData:{__typename:"PageData",allSteps:[{__typename:"StepData",content:[],instructions:null,messages:[],name:"offers",title:"בחרו את המינוי המתאים לכם"},{__typename:"StepData",content:[],instructions:null,messages:[],name:"login",title:null},{__typename:"StepData",content:[],instructions:"כעת בחרו את אמצעי התשלום",messages:[],name:"payment",title:"כמעט סיימנו."},{__typename:"StepData",content:[],instructions:null,messages:[],name:"thankYou",title:null}],contentId:"00000182-34fe-d570-a1a3-f7ff05430001",annual:[{__typename:"PurchaseOffer",offerType:"regular",benefits:[{__typename:"HtmlNode",as:"p",content:"גישה מלאה <b>לדודשך</b>",id:null},{__typename:"HtmlNode",as:"p",content:"גישה מלאה <b>לדודהשך</b>",id:null},{__typename:"HtmlNode",as:"p",content:"",id:null}],benefitsHeading:"הצעה מעולה בשבילכם",contentId:"00000184-3d51-d533-a3ce-bd5b1f680000",description:'4.9 לחודש+590 ש"ח ל 11 חודשים ומלא',exclusive:null,legalText:[{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום שנתי</b>, העסקה היא מתמשכת: עם הרכישה נגבה תשלום של 290 ש"ח בעבור השנה הראשונה (מחיר הטבה לשנה הראשונה). החל מהשנה השנייה ואילך ייגבה בתחילת כל שנה תשלום בסך 490 ש"ח (תעריף נוכחי), החסכון בשנה הראשונה הוא בהשוואה למחיר במסלול תשלום חודשי המפורסם באתר. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום חודשי</b>, העסקה היא מתמשכת, והתשלום בסך 49 ש"ח (מחיר מחירון נוכחי) יגבה בכל חודש. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:"<b>ניתן לבטל את המינוי בכל עת באמצעות פנייה <u>לשירות הלקוחות שלנו</u></b>, <b>ולקבל החזר כספי באופן יחסי לתקופת השימוש במינוי.</b> המינוי הינו אישי ואינו ניתן להעברה או לשימוש על ידי גורם אחר.",id:null}],line1Text:[{__typename:"HtmlNode",as:"p",content:"4.90 לחודש הראשון<br>",id:null}],line2Text:[],offerHighlight:"הכי משתלם",paymentType:"J4",periodCalc:12,prices:[4.9,590],product:"BOTH",productName:"מינוי להארץ + TheMarker",saleCode:3008,thankYouMailTemplate:"6106",promotionNumber:6792,productNumber:274},{__typename:"PurchaseOffer",offerType:"regular",benefits:[{__typename:"HtmlNode",as:"p",content:"גישה מלאה לכל תכני <b>הארץ</b> ו-<b>TheMarker</b> באתר ובאפליקציות ",id:null},{__typename:"HtmlNode",as:"p",content:"10 כתבות מתנה לשליחה ושיתוף חברים",id:null},{__typename:"HtmlNode",as:"p",content:"טוקבקים באישור מהיר באתר הארץ ו-TheMarker",id:null},{__typename:"HtmlNode",as:"p",content:"״היומית״: דיוור ערב עם המלצות למנויים בלבד<br>",id:null}],benefitsHeading:null,contentId:"00000184-38a9-d103-ada5-3db9e0860000",description:"מנוי שנתי מלא",exclusive:null,legalText:[{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום שנתי</b>, העסקה היא מתמשכת, עם הרכישה נגבה תשלום של 4.90 ש"ח בעבור החודש הראשון, ובחודש הבא 590 ש"ח (תעריף נוכחי) עבור יתרת השנה. החל מהשנה השנייה ואילך ייגבה בתחילת כל שנה תשלום בסך 690 ש"ח (תעריף נוכחי), החיסכון בשנה הראשונה הוא בהשוואה למחיר במסלול תשלום חודשי המפורסם באתר. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום חודשי</b>, העסקה היא מתמשכת, והתשלום בסך 65 ש"ח (מחיר מחירון נוכחי) יגבה בכל חודש. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:'<b>ניתן לבטל את המינוי בכל עת באמצעות פנייה </b><a class="#a#" href="/misc/contact-us">לשירות הלקוחות שלנו</a>, <b>ולקבל החזר כספי באופן יחסי לתקופת השימוש במינוי.</b> המינוי הינו אישי ואינו ניתן להעברה או לשימוש על ידי גורם אחר.',id:null}],line1Text:[{__typename:"HtmlNode",as:"p",content:"<b>רכשו ב-3.90</b>₪ בחודש הראשון",id:null}],line2Text:[],offerHighlight:null,paymentType:"J4",periodCalc:12,prices:[4.9,460],product:"HTZ",productName:"מינוי להארץ",saleCode:3031,thankYouMailTemplate:"6107",promotionNumber:6107,productNumber:243}],couponErrorMessage:null,marketingBullets:[],monthly:[{__typename:"PurchaseOffer",offerType:"regular",benefits:[{__typename:"HtmlNode",as:"p",content:"* <b>גישה מלאה</b> לכל תכני הארץ ו-TheMarker באתר ובאפליקציות ",id:null},{__typename:"HtmlNode",as:"p",content:"* 10 כתבות <b>מתנה </b>לשליחה ושיתוף חברים ",id:null},{__typename:"HtmlNode",as:"p",content:"* <b>טוקבקים </b>באישור מהיר באתר הארץ ו-TheMarker ",id:null},{__typename:"HtmlNode",as:"p",content:"* ״היומית״: <b>דיוור ערב</b> עם המלצות למנויים בלבד<br>",id:null}],benefitsHeading:"הכי משתלם",contentId:"00000184-38a1-d103-ada5-3db1b92f0000",description:"מחיר מלא - חודשי",exclusive:"הכי משתלם",legalText:[{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום שנתי</b>, העסקה היא מתמשכת: עם הרכישה נגבה תשלום של 290 ש"ח בעבור השנה הראשונה (מחיר הטבה לשנה הראשונה). החל מהשנה השנייה ואילך ייגבה בתחילת כל שנה תשלום בסך 490 ש"ח (תעריף נוכחי), החסכון בשנה הראשונה הוא בהשוואה למחיר במסלול תשלום חודשי המפורסם באתר. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:'<b>במסלול תשלום חודשי</b>, העסקה היא מתמשכת, והתשלום בסך 49 ש"ח (מחיר מחירון נוכחי) יגבה בכל חודש. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:"",id:null},{__typename:"HtmlNode",as:"p",content:"<b>ניתן לבטל את המינוי בכל עת באמצעות פנייה <u>לשירות הלקוחות שלנו</u></b>, <b>ולקבל החזר כספי באופן יחסי לתקופת השימוש במינוי.</b> המינוי הינו אישי ואינו ניתן להעברה או לשימוש על ידי גורם אחר.",id:null}],line1Text:[{__typename:"HtmlNode",as:"p",content:"<b>רכשו ב-4.90 ש״ח בחודש הראשון</b>",id:null}],line2Text:[{__typename:"HtmlNode",as:"p",content:'ואז 49 ש"ח לחודש',id:null}],offerHighlight:null,paymentType:"J4",periodCalc:1,prices:[65,65],product:"BOTH",productName:"מינוי להארץ + TheMarker",saleCode:3030,thankYouMailTemplate:"6106",promotionNumber:6793,productNumber:274},{__typename:"PurchaseOffer",offerType:"regular",benefits:[{__typename:"HtmlNode",as:"p",content:"כל תכני הארץ במחשב ובאפליקציה",id:null},{__typename:"HtmlNode",as:"p",content:"פחות פרסומות באתר הארץ",id:null},{__typename:"HtmlNode",as:"p",content:'חדש! "היומית": דיוור ערב עם המלצות למנויים בלבד',id:null},{__typename:"HtmlNode",as:"p",content:"חדש! 10 כתבות מתנה בחודש לשליחה ושיתוף חברים",id:null},{__typename:"HtmlNode",as:"p",content:"ניתן לבטל בכל עת<br>",id:null}],benefitsHeading:"יתרונות המינוי",contentId:"00000184-3d58-d91a-a5d7-fd783c520000",description:"מחיר מלא - חודשי",exclusive:null,legalText:[{__typename:"HtmlNode",as:"p",content:'במסלול תשלום חודשי, העסקה היא מתמשכת, והתשלום בסך 49 ש"ח (מחיר מחירון נוכחי) יגבה בכל חודש. אם יחול שינוי בתעריף, תישלח על כך הודעה מראש בדואר האלקטרוני.',id:null},{__typename:"HtmlNode",as:"p",content:"ניתן לבטל את המינוי בכל עת באמצעות פנייה <u>לשירות הלקוחות שלנו</u>. המינוי הינו אישי ואינו ניתן להעברה או לשימוש על ידי גורם אחר.",id:null},{__typename:"HtmlNode",as:"p",content:"",id:null}],line1Text:[{__typename:"HtmlNode",as:"p",content:'49 ש"ח לחודש',id:null}],line2Text:[],offerHighlight:null,paymentType:"J4",periodCalc:1,prices:[49,49],product:"HTZ",productName:"מינוי להארץ",saleCode:3028,thankYouMailTemplate:"6107",promotionNumber:6107,productNumber:243}],steps:[{__typename:"StepData",content:[],instructions:null,messages:[],name:"offers",title:"בחרו את המינוי המתאים לכם"},{__typename:"StepData",content:[],instructions:null,messages:[],name:"login",title:null},{__typename:"StepData",content:[],instructions:"כעת בחרו את אמצעי התשלום",messages:[],name:"payment",title:"כמעט סיימנו."},{__typename:"StepData",content:[],instructions:null,messages:[],name:"thankYou",title:null}],specialSaleData:{__typename:"SpecialSaleData",exclusive:"תמיד מעניין בהארץ",image:null,title:"מינוי שנתי בהנחה לזמן מוגבל"},thankYouPageText:null}}};var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),src_user=__webpack_require__("../../utils/s-atoms/src/user/index.ts"),CheckEmailExist=__webpack_require__("../../graphql/s-lgn-queries/src/__generated__/CheckEmailExist.ts");function useCheckEmailExist(variables,options){return(0,CheckEmailExist.cm)(variables,options)}useCheckEmailExist.getKey=CheckEmailExist.cm.getKey,useCheckEmailExist.fetcher=CheckEmailExist.cm.fetcher;const use_check_exist_user=useCheckEmailExist;var UserCredentialsType=__webpack_require__("../../graphql/s-fragments/src/__generated__/UserCredentialsType.ts"),useMutation=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useMutation.mjs"),GraphqlFetcher=__webpack_require__("../../graphql/s-graphql-fetcher/src/GraphqlFetcher.tsx");const LoginMutationDocument=`\n    mutation LoginMutation($input: LoginInputType!) {\n  login(input: $input) {\n    ...UserCredentialsTypeFragment\n  }\n}\n    ${UserCredentialsType.F}`,useLoginMutation=options=>(0,useMutation.D)(["LoginMutation"],(variables=>(0,GraphqlFetcher.Z)(LoginMutationDocument,variables)()),options);useLoginMutation.getKey=()=>["LoginMutation"],useLoginMutation.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(LoginMutationDocument,variables,options);var Buffer=__webpack_require__("../../../node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").lW;const handle_response=function handleResponse(data){var _data$user;const abuse=null===(_data$user=data.user)||void 0===_data$user?void 0:_data$user.abuse,success=data.success,messages=data.messages;if(!1===success&&"abuse-logout"===(null==messages?void 0:messages[0])&&abuse){var _data$user2;const token=null==data||null===(_data$user2=data.user)||void 0===_data$user2?void 0:_data$user2.abuse.redirect,redirect="string"==typeof token?/(\/abuse):(.*):(.*)/.exec(token):null,redirectInfo=redirect?{url:`https://login.haaretz.co.il${redirect[1]}`,email:redirect[2],sso:redirect[3]}:null;if(redirectInfo){const loginData="undefined"==typeof document?Buffer.from(JSON.stringify(redirectInfo)).toString("base64"):btoa(JSON.stringify(redirectInfo)),url=`${redirectInfo.url}?loginData=${loginData}`;window.location.assign(url)}}};function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function useLogin(options){const[,updateUser]=(0,src_user.Z)();return useLoginMutation(_objectSpread(_objectSpread({},options),{},{onSuccess:async(data,variables,context)=>{handle_response(null==data?void 0:data.login),updateUser("login"),"function"==typeof(null==options?void 0:options.onSuccess)&&options.onSuccess(data,variables,context)}}))}try{useLogin.displayName="useLogin",useLogin.__docgenInfo={description:"",displayName:"useLogin",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../hooks/s-auth-hooks/src/use-login/useLogin.tsx#useLogin"]={docgenInfo:useLogin.__docgenInfo,name:"useLogin",path:"../../hooks/s-auth-hooks/src/use-login/useLogin.tsx#useLogin"})}catch(__react_docgen_typescript_loader_error){}const use_login=useLogin,RegistrationMutationDocument=`\n    mutation RegistrationMutation($input: RegistrationInputType!) {\n  registration(input: $input) {\n    ...UserCredentialsTypeFragment\n  }\n}\n    ${UserCredentialsType.F}`,useRegistrationMutation=options=>(0,useMutation.D)(["RegistrationMutation"],(variables=>(0,GraphqlFetcher.Z)(RegistrationMutationDocument,variables)()),options);function useRegistration_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function useRegistration_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?useRegistration_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useRegistration_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function useRegistration(options){const[,updateUser]=(0,src_user.Z)();return useRegistrationMutation(useRegistration_objectSpread(useRegistration_objectSpread({},options),{},{onSuccess:async(data,variables,context)=>{handle_response(null==data?void 0:data.registration),updateUser("login"),"function"==typeof(null==options?void 0:options.onSuccess)&&options.onSuccess(data,variables,context)}}))}useRegistrationMutation.getKey=()=>["RegistrationMutation"],useRegistrationMutation.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(RegistrationMutationDocument,variables,options);try{useRegistration.displayName="useRegistration",useRegistration.__docgenInfo={description:"",displayName:"useRegistration",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../hooks/s-auth-hooks/src/use-registration/useRegistration.tsx#useRegistration"]={docgenInfo:useRegistration.__docgenInfo,name:"useRegistration",path:"../../hooks/s-auth-hooks/src/use-registration/useRegistration.tsx#useRegistration"})}catch(__react_docgen_typescript_loader_error){}const use_registration=useRegistration,UpdateUserMutationDocument=`\n    mutation UpdateUserMutation($input: UpdateUserInputType!) {\n  updateUser(input: $input) {\n    ...UserCredentialsTypeFragment\n  }\n}\n    ${UserCredentialsType.F}`,useUpdateUserMutation=options=>(0,useMutation.D)(["UpdateUserMutation"],(variables=>(0,GraphqlFetcher.Z)(UpdateUserMutationDocument,variables)()),options);function useUpdateUser_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function useUpdateUser_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?useUpdateUser_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useUpdateUser_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function useUpdateUser(options){const[,updateUser]=(0,src_user.Z)();return useUpdateUserMutation(useUpdateUser_objectSpread(useUpdateUser_objectSpread({},options),{},{onSuccess:async(data,variables,context)=>{handle_response(null==data?void 0:data.updateUser),updateUser("login"),"function"==typeof(null==options?void 0:options.onSuccess)&&options.onSuccess(data,variables,context)}}))}useUpdateUserMutation.getKey=()=>["UpdateUserMutation"],useUpdateUserMutation.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(UpdateUserMutationDocument,variables,options);try{useUpdateUser.displayName="useUpdateUser",useUpdateUser.__docgenInfo={description:"",displayName:"useUpdateUser",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../hooks/s-auth-hooks/src/use-update-user/useUpdateUser.tsx#useUpdateUser"]={docgenInfo:useUpdateUser.__docgenInfo,name:"useUpdateUser",path:"../../hooks/s-auth-hooks/src/use-update-user/useUpdateUser.tsx#useUpdateUser"})}catch(__react_docgen_typescript_loader_error){}const use_update_user=useUpdateUser;var useQuery=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useQuery.mjs");__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useInfiniteQuery.mjs");const ValidateEmailQueryDocument="\n    query ValidateEmailQuery($email: String!, $site: Site!) {\n  validateEmail(email: $email, site: $site) {\n    status\n    result\n  }\n}\n    ",useValidateEmailQuery=(variables,options)=>(0,useQuery.a)(["ValidateEmailQuery",variables],(0,GraphqlFetcher.Z)(ValidateEmailQueryDocument,variables),options);useValidateEmailQuery.document=ValidateEmailQueryDocument,useValidateEmailQuery.getKey=variables=>["ValidateEmailQuery",variables];function useValidateEmail(variables,options){return useValidateEmailQuery(variables,options)}useValidateEmailQuery.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(ValidateEmailQueryDocument,variables,options),useValidateEmail.getKey=useValidateEmailQuery.getKey,useValidateEmail.fetcher=useValidateEmailQuery.fetcher;const use_validate_email=useValidateEmail;var s_button_src=__webpack_require__("../../ds-atoms/s-button/src/index.ts"),decodeUnicodeBase64=__webpack_require__("../../utils/s-common-utils/src/decodeUnicodeBase64/index.ts"),s_consts_src=__webpack_require__("../../shared/s-consts/src/index.ts"),cookieToMap=__webpack_require__("../../utils/s-cookie-utils/src/cookieToMap/index.ts"),EmailField=__webpack_require__("../../ds-molecules/s-form-fields/src/EmailField/index.ts"),s_generate_subscription_text_src=__webpack_require__("../../utils/s-generate-subscription-text/src/index.ts"),plantAnonymousIdCookieMiddleware=__webpack_require__("../../middlewares/s-plant-anonymous-id-cookie-middleware/src/plantAnonymousIdCookieMiddleware.ts"),fetchChangePlan=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/fetchChangePlan/index.ts"),getAbandonedCartLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getAbandonedCartLink/index.ts"),getUtmQueryParameters=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getUtmQueryParameters/index.ts");const s_pp_errors_src=__webpack_require__("../../pp-atoms/s-pp-errors/src/PpErrors.tsx").Z;const s_pp_forgot_password_src=__webpack_require__("../../pp-organisms/s-pp-forgot-password/src/PpForgotPassword.tsx").Z;var s_pp_header_src=__webpack_require__("../../pp-molecules/s-pp-header/src/index.ts"),s_pp_image_src=__webpack_require__("../../pp-atoms/s-pp-image/src/index.ts"),PurchasePage=__webpack_require__("../../graphql/s-pp-queries/src/__generated__/PurchasePage.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),getCurrentStep=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/getCurrentStep/index.ts"),getCurrentStepName=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/getCurrentStepName/index.ts"),getFirstStep=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/getFirstStep/index.ts"),isAbandonedCartRoute=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/isAbandonedCartRoute/index.ts"),usePersonalFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/usePersonalFreeCoupon/index.ts"),useRegularFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/useRegularFreeCoupon/index.ts"),isCoupon=__webpack_require__("../../utils/s-type-predicates/src/isCoupon/index.ts"),isFilledPpOffersStore=__webpack_require__("../../utils/s-type-predicates/src/isFilledPpOffersStore/index.ts"),isFreeCoupon=__webpack_require__("../../utils/s-type-predicates/src/isFreeCoupon/index.ts"),isPersonalCoupon=__webpack_require__("../../utils/s-type-predicates/src/isPersonalCoupon/index.ts"),s_use_bi_src=__webpack_require__("../../hooks/s-use-bi/src/index.ts"),s_use_config_src=__webpack_require__("../../hooks/s-use-config/src/index.ts"),usePPDataStore=__webpack_require__("../../pp-hooks/s-use-pp-data-store/src/usePPDataStore.tsx"),s_use_pp_data_variables_src=__webpack_require__("../../pp-hooks/s-use-pp-data-variables/src/index.ts"),usePPStepsOffsetStore=__webpack_require__("../../pp-hooks/s-use-pp-offset-steps-store/src/usePPStepsOffsetStore.tsx"),emailValidator=__webpack_require__("../../utils/s-validators/src/emailValidator/index.ts"),QueryClientProvider=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),next_router_mock_dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs");const components_LoginForm=__webpack_require__("../../pp-pages/s-pp-login-page/src/components/LoginForm/LoginForm.tsx").Z;const components_RegistrationForm=__webpack_require__("../../pp-pages/s-pp-login-page/src/components/RegistrationForm/RegistrationForm.tsx").Z;var console=__webpack_require__("../../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const _excluded=["selectedOfferId"];function PpLoginPage_page_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function PpLoginPage_page_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?PpLoginPage_page_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PpLoginPage_page_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const c={base:{marginTop:"EKhXX",marginInlineEnd:"gzedBA",marginInlineStart:"bMPiZO",maxWidth:"clobCc",paddingInlineEnd:"fxCImo",paddingInlineStart:"fPuwlT",width:"cRUUAa","@media all and (min-width:48em) and (max-width:79.9375em)":{marginTop:"gwGMXY",maxWidth:"CxjPw"},"@media all and (min-width:80em)":{marginTop:"gZIZae",maxWidth:"kUsvdA"},fontFamily:"cGpNyn"},fullForm:{rowGap:"eSylHt","@media all and (min-width:80em)":{rowGap:"btkajQ"}},button:{justifySelf:"BQbTc",marginTop:"ha_DTbp","@media all and (min-width:80em)":{marginTop:"ivBgPP"}},form:{display:"kbCXHY",columnGap:"kEFtPS",marginTop:"ha_DTbp",marginBottom:"dkSlsL",gridTemplateColumns:"iKUrOT"},fullWidthColumn:{gridColumnStart:"DIEXk"},image:{alignSelf:"duSHeH",display:"kQBRAp",fontSize:"cqCNZN",marginBottom:"kEhtav",marginInlineStart:"bMPiZO",marginInlineEnd:"gzedBA",transform:"kVpnfS","@media all and (min-width:64em) and (max-width:79.9375em)":{fontSize:"bvdGxH",marginTop:"ibaqWs",transform:"daTOZW"},"@media all and (min-width:80em)":{fontSize:"hAHsou",marginInlineStart:"griTvt",marginTop:"ksmwdc",transform:"hFqrzw"}}},isClient="undefined"!=typeof document,anonymousIdFromCookie=(isClient?(0,cookieToMap.Z)(document.cookie):{}).anonymousId;let anonymousId="";"string"==typeof anonymousIdFromCookie&&anonymousIdFromCookie&&(anonymousId=anonymousIdFromCookie),isClient&&!anonymousId&&(anonymousId=(0,plantAnonymousIdCookieMiddleware.j)());const stageInstructions={emailEntry:"אנא הזינו אימייל, שישמש לכניסה לאתר",login:"אנא הזינו את הסיסמה שאיתה נרשמתם בעבר לאתר",registration:"אנא השלימו את ההרשמה לאתר",updateUserDetails:"אנא השלימו את ההרשמה לאתר"};function LoginPage(data){var _data$PurchasePage,_emailData$data,_emailData$data4,_emailData$data5;const pageData=null==data||null===(_data$PurchasePage=data.PurchasePage)||void 0===_data$PurchasePage?void 0:_data$PurchasePage.pageData,[user,setUser]=react.useState(void 0),client=(0,QueryClientProvider.NL)(),[shouldRedirect,setShouldRedirect]=react.useState(!1),router=(0,next_router_mock_dist.useRouter)(),store=(0,usePPDataStore.JV)(),variables=(0,s_use_pp_data_variables_src.Z)(),{pushStep}=(0,usePPStepsOffsetStore.Qf)(),[errors,setErrors]=react.useState(void 0),[shouldValidateEmail,setShouldValidateEmail]=react.useState(!1),[shouldCheckEmail,setShouldCheckEmail]=react.useState(!1),redeemPersonalFreeCoupon=(0,usePersonalFreeCoupon.Z)(),redeemRegularFreeCoupon=(0,useRegularFreeCoupon.Z)(),[showForgotPasswordModal,setShowForgotPasswordModal]=react.useState(!1),biAction=(0,s_use_bi_src.Z)();function getBiData(){const currentStep=(null==pageData?void 0:pageData.steps)&&(0,getCurrentStep.Z)("login",null==pageData?void 0:pageData.allSteps).currentStepIndex+1,stageNumber="number"==typeof currentStep?currentStep.toString():void 0;return{additional_info:PpLoginPage_page_objectSpread({refactor:"true"},stageNumber?{stage_number:stageNumber}:{})}}const[userData]=(0,src_user.Z)();let defaultEmail="";const restorecart=router.query.restorecart,isUpdateDetailsStep="updateDetails"===(0,getCurrentStepName.Z)(router.pathname);if(restorecart){const restoredEmail=(0,decodeUnicodeBase64.Z)(restorecart);(0,emailValidator.Z)(restoredEmail).valid&&(defaultEmail=restoredEmail)}else isUpdateDetailsStep&&userData.userMail&&(defaultEmail=userData.userMail);const[email,setEmail]=react.useState(defaultEmail),couponId=(0,usePPDataStore.vA)(),msPurchaseUrl=(0,s_use_config_src.Z)().get("msPurchaseUrl"),{periodCalc,productNumber}=store;react.useEffect((()=>{if(!couponId){const routeChangeStartHandler=()=>{pushStep("login")};return router.events.on("routeChangeStart",routeChangeStartHandler),()=>{router.events.off("routeChangeStart",routeChangeStartHandler)}}return()=>{}}),[couponId,null==pageData?void 0:pageData.steps,pushStep,router.events]);const{selectedOfferId}=variables,variablesWithoutSelectedOfferId=(0,objectWithoutProperties.Z)(variables,_excluded),emailDataEnv=react.useMemo((()=>({email,site:s_consts_src.pq})),[email]),validateEmailData=use_validate_email(emailDataEnv,{enabled:shouldValidateEmail,onError}),emailData=use_check_exist_user(emailDataEnv,{enabled:shouldCheckEmail,onError});react.useEffect((()=>{shouldValidateEmail&&(async _validationData=>{let validationData=client.getQueryData(use_validate_email.getKey(emailDataEnv));null!==(_validationData=validationData)&&void 0!==_validationData&&_validationData.validateEmail||(validationData=await client.fetchQuery({queryKey:use_validate_email.getKey(emailDataEnv),queryFn:use_validate_email.fetcher(emailDataEnv)})),setShouldValidateEmail(!1),"valid"!==validationData.validateEmail.result?setErrors(['עשינו בדיקה ומצאנו שכתובת הדוא"ל שהזנתם אינה קיימת.']):setUser(null)})()}),[client,emailDataEnv,shouldValidateEmail]),react.useEffect((()=>{shouldCheckEmail&&(async _result=>{let result=client.getQueryData(use_check_exist_user.getKey(emailDataEnv));null!==(_result=result)&&void 0!==_result&&_result.user||(result=await client.fetchQuery({queryKey:use_check_exist_user.getKey(emailDataEnv),queryFn:use_check_exist_user.fetcher(emailDataEnv)})),shouldCheckEmail&&result.user?setUser(result.user):setShouldValidateEmail(!0),setShouldCheckEmail(!1)})()}),[client,emailDataEnv,shouldCheckEmail]);const stage=function getLoginStep(user){return void 0===user?"emailEntry":null===user?"registration":user.userStatus.miniRegStatus?"updateUserDetails":"login"}(restorecart&&(null===(_emailData$data=emailData.data)||void 0===_emailData$data?void 0:_emailData$data.user)||user),title=periodCalc&&productNumber?`בחרתם ב${(0,s_generate_subscription_text_src.Z)(periodCalc,productNumber).replace("תשלום ","")}`:"מינוי דיגיטלי",instructions=stageInstructions[stage],isAbandonedCart=(0,isAbandonedCartRoute.Z)(router.query),onSuccess=response=>{var _response$messages;if(response.success){if(couponId&&pushStep("login"),(0,isFilledPpOffersStore.Z)(store)){const link=(0,getAbandonedCartLink.Z)(PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread({},store),{},{msPurchaseUrl,couponId}));fetch(link,{method:"GET",credentials:"include"})}if(client.removeQueries(PurchasePage.RF.getKey(variables)),client.removeQueries(PurchasePage.RF.getKey(variablesWithoutSelectedOfferId)),client.prefetchQuery({queryKey:PurchasePage.RF.getKey(variables),queryFn:PurchasePage.RF.fetcher(variables)}),isAbandonedCart){const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"payment",asPath:router.asPath,currentQueryParams:router.query});router.replace(pathName,asPath,{shallow:!0})}else setShouldRedirect(!0)}else null!==(_response$messages=response.messages)&&void 0!==_response$messages&&_response$messages.length?setErrors(response.messages):setErrors([s_consts_src.TQ])};function onError(error){setErrors([error.message])}const loginData=use_login({onSuccess:response=>{onSuccess(response.login)},onError}),registrationData=use_registration({onSuccess:response=>{onSuccess(response.registration)},onError}),updateUserData=use_update_user({onSuccess:response=>{onSuccess(response.updateUser)},onError}),utmParams=react.useMemo((()=>(0,getUtmQueryParameters.Z)(router.query)),[router.query]);react.useEffect((()=>{shouldRedirect&&!!variables.selectedOfferId&&(async(_ppData,_ppData$PurchasePage,_ppData$PurchasePage2,_ppData$PurchasePage3,_ppData$PurchasePage4)=>{let ppData=client.getQueryData(PurchasePage.RF.getKey(variables));null!==(_ppData=ppData)&&void 0!==_ppData&&_ppData.PurchasePage||(ppData=await client.fetchQuery({queryKey:PurchasePage.RF.getKey(variables),queryFn:PurchasePage.RF.fetcher(variables)}));const steps=(null===(_ppData$PurchasePage=ppData.PurchasePage)||void 0===_ppData$PurchasePage?void 0:_ppData$PurchasePage.pageData.steps)||[],selectedOffer=null===(_ppData$PurchasePage2=ppData.PurchasePage)||void 0===_ppData$PurchasePage2?void 0:_ppData$PurchasePage2.pageData.selectedOffer,nextStep=(0,getFirstStep.Z)(steps),coupons={couponId:null===(_ppData$PurchasePage3=ppData.PurchasePage)||void 0===_ppData$PurchasePage3||null===(_ppData$PurchasePage3=_ppData$PurchasePage3.pageData)||void 0===_ppData$PurchasePage3?void 0:_ppData$PurchasePage3.couponId,personalCouponId:null===(_ppData$PurchasePage4=ppData.PurchasePage)||void 0===_ppData$PurchasePage4||null===(_ppData$PurchasePage4=_ppData$PurchasePage4.pageData)||void 0===_ppData$PurchasePage4?void 0:_ppData$PurchasePage4.personalCouponId};if((0,isCoupon.Z)(coupons)&&(0,isFreeCoupon.Z)(store))(0,isPersonalCoupon.Z)(coupons)?redeemPersonalFreeCoupon(PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread({},store),utmParams),{},{personalCouponId:coupons.personalCouponId,msPurchaseUrl,nextStepName:nextStep.name})):redeemRegularFreeCoupon(PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread({},store),utmParams),{},{couponId:coupons.couponId,msPurchaseUrl,nextStepName:nextStep.name}));else if("upgrade"===(null==selectedOffer?void 0:selectedOffer.offerType))try{const response=await(0,fetchChangePlan.Z)(PpLoginPage_page_objectSpread({msPurchaseUrl},selectedOffer));if((await response.json()).success){const{pathName,asPath}=(0,generatePath.Z)({nextStepName:nextStep.name,asPath:router.asPath,currentQueryParams:router.query});router.replace(pathName,asPath,{shallow:!0})}else router.replace("/error")}catch(err){console.error(err),router.replace("/error")}else{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:nextStep.name,asPath:router.asPath,currentQueryParams:router.query});router.replace(pathName,asPath,{shallow:!0})}setShouldRedirect(!1)})()}),[client,msPurchaseUrl,redeemPersonalFreeCoupon,redeemRegularFreeCoupon,router,shouldRedirect,store,utmParams,variables]);const buttonStateProps=emailData.isFetching||emailData.isLoading&&emailData.isFetched||validateEmailData.isFetching||validateEmailData.isLoading&&validateEmailData.isFetched||loginData.isLoading||registrationData.isLoading||updateUserData.isLoading?{state:"busy",busyNotice:"ממתין לתשובה"}:{state:"auto"};function clearEmail(){defaultEmail||(setErrors(void 0),setEmail(""),setUser(void 0))}return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:(0,style9.Z)(c.base),children:[(0,jsx_runtime.jsx)(s_pp_forgot_password_src,{email,isOpen:showForgotPasswordModal,onToggle:setShowForgotPasswordModal}),(0,jsx_runtime.jsx)(s_pp_header_src.Z,{currentStep:"login",title,instructions}),(0,jsx_runtime.jsxs)("form",{"aria-describedby":"pp-page-instructions","data-testid":"pp-login-form",className:(0,style9.Z)(c.form,"emailEntry"!==stage&&c.fullForm),onSubmit:event=>{event.preventDefault(),anonymousId||(anonymousId=(0,plantAnonymousIdCookieMiddleware.j)()),setErrors(void 0),"emailEntry"!==stage||defaultEmail||function onEmailSubmit(event){const emailInput=event.currentTarget.elements.namedItem("email");if(emailInput){const newEmail=emailInput.value.trim();setEmail(newEmail),setShouldCheckEmail(!0),biAction(PpLoginPage_page_objectSpread({action_id:115,feature_type:"Login",newsletter_email:emailInput.value,stage:"login"},getBiData()))}}(event),"registration"===stage||"updateUserDetails"===stage?function onRegistrationOrUpdate(event){const passwordInput=event.currentTarget.elements.namedItem("password"),firstNameInput=event.currentTarget.elements.namedItem("firstName"),lastNameInput=event.currentTarget.elements.namedItem("lastName"),termsCheckbox=event.currentTarget.elements.namedItem("terms");if(passwordInput&&firstNameInput&&lastNameInput&&email){const password=passwordInput.value.trim(),firstName=firstNameInput.value.trim(),lastName=lastNameInput.value.trim(),terms=!("registration"!==stage||!termsCheckbox)&&termsCheckbox.checked;var _emailData$data3;"registration"===stage?(biAction(PpLoginPage_page_objectSpread({action_id:61,feature_type:"Login",newsletter_email:email,stage:"login "},getBiData())),registrationData.mutate({input:{email,password,siteId:s_consts_src.OE,anonymousId,trmsChk:null!==(_emailData$data3=emailData.data)&&void 0!==_emailData$data3&&null!==(_emailData$data3=_emailData$data3.user)&&void 0!==_emailData$data3&&_emailData$data3.termsCheck||!0===terms?"on":"off",firstName,lastName,isEntitlement:!1,restEntryType:"PROMOTIONS_PAGE"}})):(biAction(PpLoginPage_page_objectSpread({action_id:172,feature_type:"Login",newsletter_email:email,stage:"login "},getBiData())),updateUserData.mutate({input:{email,password,siteId:s_consts_src.OE,firstName,lastName}}))}}(event):"login"===stage&&function onLogin(event){const passwordInput=event.currentTarget.elements.namedItem("password"),termsCheckbox=event.currentTarget.elements.namedItem("terms");if(passwordInput&&email){var _emailData$data2;const password=passwordInput.value,terms=(null==termsCheckbox?void 0:termsCheckbox.checked)||!1;biAction(PpLoginPage_page_objectSpread({action_id:60,feature_type:"Login",newsletter_email:email,stage:"login"},getBiData())),loginData.mutate({input:{email,password,siteId:s_consts_src.OE,anonymousId,trmsChk:null!==(_emailData$data2=emailData.data)&&void 0!==_emailData$data2&&null!==(_emailData$data2=_emailData$data2.user)&&void 0!==_emailData$data2&&_emailData$data2.termsCheck||!0===terms?"on":"off"}})}}(event)},children:["emailEntry"===stage?(0,jsx_runtime.jsx)(EmailField.Z,{}):null,"login"===stage?(0,jsx_runtime.jsx)(components_LoginForm,{email,termsCheck:(null===(_emailData$data4=emailData.data)||void 0===_emailData$data4||null===(_emailData$data4=_emailData$data4.user)||void 0===_emailData$data4?void 0:_emailData$data4.termsCheck)||!1,clearEmail,setShowForgotPasswordModal,getBiData}):null,"registration"===stage||"updateUserDetails"===stage?(0,jsx_runtime.jsx)(components_RegistrationForm,{email,termsCheck:!0===(null===(_emailData$data5=emailData.data)||void 0===_emailData$data5||null===(_emailData$data5=_emailData$data5.user)||void 0===_emailData$data5?void 0:_emailData$data5.termsCheck)||"updateUserDetails"===stage,clearEmail,getBiData}):null,errors?(0,jsx_runtime.jsx)(s_pp_errors_src,{children:errors}):null,(0,jsx_runtime.jsx)(s_button_src.ZP,PpLoginPage_page_objectSpread(PpLoginPage_page_objectSpread({type:"submit"},buttonStateProps),{},{styleExtend:[c.button,c.fullWidthColumn],"data-testid":"login-continue-btn",children:"המשך"}))]})]}),(0,jsx_runtime.jsx)(s_pp_image_src.Z,{styleExtend:[c.image]})]})}try{PpLoginPagepage.displayName="PpLoginPagepage",PpLoginPagepage.__docgenInfo={description:"",displayName:"PpLoginPagepage",props:{PurchasePage:{defaultValue:null,description:"",name:"PurchasePage",required:!1,type:{name:"({ pageData: { contentId: string; couponId?: string | null | undefined; couponErrorMessage?: string | null | undefined; personalCouponId?: string | null | undefined; thankYouPageText?: string | ... 1 more ... | undefined; ... 9 more ...; selectedOffer?: ({ ...; } & ... 1 more ... & { ...; }) | ... 1 more ... | undef..."}},__typename:{defaultValue:null,description:"",name:"__typename",required:!0,type:{name:'"Query"'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-pages/s-pp-login-page/src/PpLoginPage.page.tsx#PpLoginPagepage"]={docgenInfo:PpLoginPagepage.__docgenInfo,name:"PpLoginPagepage",path:"../../pp-pages/s-pp-login-page/src/PpLoginPage.page.tsx#PpLoginPagepage"})}catch(__react_docgen_typescript_loader_error){}var _Overview$parameters,_Overview$parameters2;function PpLoginPage_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function PpLoginPage_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?PpLoginPage_stories_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PpLoginPage_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const meta={component:LoginPage,title:"Purchase/Pages/PpLoginPage",args:PpLoginPage_stories_objectSpread({},loginPageMockData),argTypes:{},parameters:{docs:{page:PpLoginPage_doc}},decorators:[src.Z,...preview.an]},Overview=()=>(0,jsx_runtime.jsx)(LoginPage,PpLoginPage_stories_objectSpread({},loginPageMockData)),PpLoginPage_stories=meta;Overview.parameters=PpLoginPage_stories_objectSpread(PpLoginPage_stories_objectSpread({},Overview.parameters),{},{docs:PpLoginPage_stories_objectSpread(PpLoginPage_stories_objectSpread({},null===(_Overview$parameters=Overview.parameters)||void 0===_Overview$parameters?void 0:_Overview$parameters.docs),{},{source:PpLoginPage_stories_objectSpread({originalSource:"() => <PpLoginPage {...loginPageMockData} />"},null===(_Overview$parameters2=Overview.parameters)||void 0===_Overview$parameters2||null===(_Overview$parameters2=_Overview$parameters2.docs)||void 0===_Overview$parameters2?void 0:_Overview$parameters2.source)})})},"../../ds-atoms/s-rich-text/src/RichText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RichText,p:()=>DEFAULT_ELEMENT});var _home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),style9__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs");const _excluded=["as","inlineStyle","styleExtend","content","strongStyleExtend"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const c={base:{},em:{fontStyle:"foKnQA"},strong:{fontWeight:"iLdtFu"},mark:{backgroundColor:"jNZGNs"},link:{outlineWidth:"eGCNgh",textDecorationLine:"dLUwcr",textDecorationColor:"dDxYlR",textDecorationThickness:"hnHEBj",textUnderlineOffset:"cEqDEh",transitionProperty:"iRietU",transitionDuration:"gAhwfJ",transitionTimingFunction:"iaemGh",":hover":{color:"klOnSG"},":focus":{color:"bsfUtT"}},u:{textDecorationLine:"dLUwcr",textDecorationSkip:"jqXfau"}},DEFAULT_ELEMENT="p",allowedElements=["p","ul","ol","li","h1","h3","span"];function RichText(_ref){let{as,inlineStyle,styleExtend=[],content,strongStyleExtend=[]}=_ref,attrs=(0,_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_ref,_excluded);const Element=as||DEFAULT_ELEMENT;if("string"==typeof as&&!allowedElements.includes(as)||"function"==typeof as)throw new TypeError('<RichTextProps /> may only render a "p", "h3", "h1", "ul", "ol" or  a "li" element.\nYou passed something else to the "as" prop');const html=function replaceAll(str,mapObj){if("string"!=typeof str)return"";const replaceStr=new RegExp(Object.keys(mapObj).join("|"),"gi");return str.replace(replaceStr,(matched=>mapObj[matched.toLowerCase()]||"#placeholder#"))}(content,{"#em#":(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.em),"#strong#":(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.strong,...strongStyleExtend),"#a#":(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.link),"#mark#":(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.mark),"#u#":(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.u)});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Element,_objectSpread(_objectSpread({},attrs),{},{className:(0,style9__WEBPACK_IMPORTED_MODULE_2__.Z)(c.base,...styleExtend),style:inlineStyle,dangerouslySetInnerHTML:{__html:html}}))}try{RichText.displayName="RichText",RichText.__docgenInfo={description:"",displayName:"RichText",props:{as:{defaultValue:null,description:"The HTML element (`${AllowedElements}`) the `<RichText />` will be rendered as.\n@defaultValue 'p'",name:"as",required:!1,type:{name:'(ElementType<any> & (ComponentType<any> | "h1" | "h3" | "li" | "ol" | "p" | "span" | "ul")) | undefined'}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyRichText(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <RichText\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:{value:"[]"},description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<RichText styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}},strongStyleExtend:{defaultValue:{value:"[]"},description:"Same as styleExtend for strong class.",name:"strongStyleExtend",required:!1,type:{name:"StyleExtend | undefined"}},content:{defaultValue:null,description:"The html string to set the elment's innerHtml.\nHas to be replaced with style9 classes first.",name:"content",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"HtmlElement id attribute.",name:"id",required:!1,type:{name:"string | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../ds-atoms/s-rich-text/src/RichText.tsx#RichText"]={docgenInfo:RichText.__docgenInfo,name:"RichText",path:"../../ds-atoms/s-rich-text/src/RichText.tsx#RichText"})}catch(__react_docgen_typescript_loader_error){}},"../../ds-atoms/s-rich-text/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../ds-atoms/s-rich-text/src/RichText.tsx").Z},"../../graphql/s-fragments/src/__generated__/UserCredentialsType.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>UserCredentialsTypeFragmentGql});const UserCredentialsTypeFragmentGql="\n    fragment UserCredentialsTypeFragment on UserCredentialsType {\n  __typename\n  success\n  code\n  messages\n  user {\n    __typename\n    abuse {\n      __typename\n      redirect\n    }\n  }\n  status\n}\n    "},"../../graphql/s-lgn-queries/src/__generated__/CheckEmailExist.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cm:()=>useCheckEmailExistPersonalQuery});__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js");var useQuery=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),GraphqlFetcher=(__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.36.1_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useInfiniteQuery.mjs"),__webpack_require__("../../graphql/s-graphql-fetcher/src/GraphqlFetcher.tsx"));const CheckEmailExistPersonalQueryDocument="\n    query CheckEmailExistPersonalQuery($email: String!, $site: Site!) {\n  user: userLogin(email: $email) {\n    ssoId: _id\n    mobilePhone\n    isPaying(site: $site)\n    termsCheck(site: $site)\n    userStatus {\n      ...UserStatusFragment\n    }\n  }\n}\n    \n    fragment UserStatusFragment on UserStatus {\n  __typename\n  isMailValidated\n  isMobileValidated\n  miniRegStatus\n  isPhoneEmailConn\n}\n    ",useCheckEmailExistPersonalQuery=(variables,options)=>(0,useQuery.a)(["CheckEmailExistPersonalQuery",variables],(0,GraphqlFetcher.Z)(CheckEmailExistPersonalQueryDocument,variables),options);useCheckEmailExistPersonalQuery.document=CheckEmailExistPersonalQueryDocument,useCheckEmailExistPersonalQuery.getKey=variables=>["CheckEmailExistPersonalQuery",variables];useCheckEmailExistPersonalQuery.fetcher=(variables,options)=>(0,GraphqlFetcher.Z)(CheckEmailExistPersonalQueryDocument,variables,options)},"../../hooks/s-use-bi/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src});var configShim=__webpack_require__("../../config/l-storybook-config/wwwroot/public/configShim.js"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),useBiDataContext=__webpack_require__("../../hooks/s-use-bi/src/useBiDataContext.tsx");const src=function useBi(){let biUrl,biType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"action";const biServer=configShim.Z.get("bIServer");switch(biType){case"impression":biUrl=`${biServer}/impressionPlain`;break;case"pageview":biUrl=`${biServer}/requestPlain`;break;default:biUrl=`${biServer}/actionPlain`}const contextBiDataPromise=(0,useBiDataContext.Z)();return react.useCallback((userBiData=>{contextBiDataPromise.then((contextBiData=>{var _window$navigator;const{additional_info}=userBiData;additional_info&&"object"==typeof additional_info&&(userBiData.additional_info=JSON.stringify(additional_info));const finalBiData=Object.assign({},contextBiData,userBiData);null===(_window$navigator=window.navigator)||void 0===_window$navigator||_window$navigator.sendBeacon(biUrl,JSON.stringify(finalBiData))}))}),[biUrl,contextBiDataPromise])}},"../../hooks/s-use-config/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../hooks/s-use-config/src/useConfig.ts").Z},"../../middlewares/s-plant-anonymous-id-cookie-middleware/src/plantAnonymousIdCookieMiddleware.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>plantAnonymousIdCookieMiddleware,j:()=>plantAnonymousIdCookie});var getRandomInt=__webpack_require__("../../utils/s-common-utils/src/getRandomInt/index.ts"),src=__webpack_require__("../../shared/s-consts/src/index.ts");const src_generateAnonymousId=function generateAnonymousId(hostname){const salt=(0,getRandomInt.Z)(1e3,9999),now=Date.now(),expire=new Date(now+76896e5),anonymousId=`${now}${salt}`,domain=hostname||src.Kn;return{anonymousId,expire,domain,cookie:`anonymousId=${anonymousId}; path=/; Domain=.${domain}; Expires=${expire};`}};var cookieToMap=__webpack_require__("../../utils/s-cookie-utils/src/cookieToMap/index.ts");const src_setCookie=function setCookie(cookieName,value,expires){return document.cookie=`${cookieName}=${value}; path=/; domain=.${src.Kn}; expires=${expires};`,(0,cookieToMap.Z)(document.cookie,!0)[cookieName]};function plantAnonymousIdCookieMiddleware(_ref){var _ctx$req$cookies,_ctx$res;let{ctx}=_ref;if(!(ctx.req.headers.anonymousid||ctx.req.headers.anonymousId||(null===(_ctx$req$cookies=ctx.req.cookies)||void 0===_ctx$req$cookies?void 0:_ctx$req$cookies.anonymousId))&&"function"==typeof(null===(_ctx$res=ctx.res)||void 0===_ctx$res?void 0:_ctx$res.setHeader)){var _ctx$res2;const{anonymousId:newAnonymousId,cookie}=src_generateAnonymousId();ctx.req.cookies.anonymousId=newAnonymousId,null===(_ctx$res2=ctx.res)||void 0===_ctx$res2||_ctx$res2.setHeader("Set-Cookie",cookie)}return Promise.resolve({})}function plantAnonymousIdCookie(){const{anonymousId:newAnonymousId,expire}=src_generateAnonymousId();return src_setCookie("anonymousId",newAnonymousId,expire)}},"../../pp-atoms/s-pp-errors/src/PpErrors.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PpErrors});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),_haaretz_s_rich_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../ds-atoms/s-rich-text/src/index.ts"),style9__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs");const c={errors:{textAlign:"kooHYa",color:"flyuuT",gridColumnStart:"DIEXk",marginTop:"cUXNmd",marginBottom:"biWxPv"}};function PpError(_ref){let{children:error}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_haaretz_s_rich_text__WEBPACK_IMPORTED_MODULE_2__.Z,{as:"p",content:error})}function PpErrors(_ref2){let{children}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,style9__WEBPACK_IMPORTED_MODULE_1__.Z)(c.errors),"aria-live":"assertive","aria-relevant":"additions",children:Array.isArray(children)?children.map((error=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PpError,{children:error},error))):children?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PpError,{children}):null})}try{PpErrors.displayName="PpErrors",PpErrors.__docgenInfo={description:"",displayName:"PpErrors",props:{children:{defaultValue:null,description:"The Children to be rendered inside `<PpErrors>`",name:"children",required:!1,type:{name:"((string | string[]) & (string | number | boolean | ReactElement<any, string | JSXElementConstructor<any>> | Iterable<ReactNode> | ReactPortal | PromiseLikeOfReactNode | null)) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-atoms/s-pp-errors/src/PpErrors.tsx#PpErrors"]={docgenInfo:PpErrors.__docgenInfo,name:"PpErrors",path:"../../pp-atoms/s-pp-errors/src/PpErrors.tsx#PpErrors"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-atoms/s-pp-image/src/PpImage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PpImage});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),style9__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs");const c={base:{height:"jXmXEB",width:"fCehYP",pointerEvents:"eDssNQ"}};function PpImage(_ref){let{inlineStyle,styleExtend=[]}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:(0,style9__WEBPACK_IMPORTED_MODULE_1__.Z)(c.base,...styleExtend),style:inlineStyle,focusable:!1,tabIndex:-1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("use",{xlinkHref:"#promotion-img"})})}try{PpImage.displayName="PpImage",PpImage.__docgenInfo={description:"",displayName:"PpImage",props:{inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyPpImage(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <PpImage\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:{value:"[]"},description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<PpImage styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-atoms/s-pp-image/src/PpImage.tsx#PpImage"]={docgenInfo:PpImage.__docgenInfo,name:"PpImage",path:"../../pp-atoms/s-pp-image/src/PpImage.tsx#PpImage"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-atoms/s-pp-image/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../pp-atoms/s-pp-image/src/PpImage.tsx").Z},"../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_useFreeCoupon});var user=__webpack_require__("../../utils/s-atoms/src/user/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("../../../node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const src_useFreeCoupon=function useFreeCoupon(){const router=(0,dist.useRouter)(),[,updateUser]=(0,user.Z)();return react.useCallback((async(couponUrl,nextStepName)=>{const headers=new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"});try{var _json$messageType;const data=await fetch(couponUrl,{method:"GET",credentials:"include",headers});if(null!==(_json$messageType=(await data.json()).messageType)&&void 0!==_json$messageType&&_json$messageType.startsWith("SUCCESSFUL_PURCHASE")){const{pathName,asPath}=(0,generatePath.Z)({nextStepName,asPath:router.asPath,currentQueryParams:router.query});updateUser("login"),router.push(pathName,asPath,{shallow:!0})}else{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}catch(error){console.error(error.message);const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}),[router,updateUser])}},"../../pp-hooks/s-pp-use-coupon/src/usePersonalFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_usePersonalFreeCoupon});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),src_user=__webpack_require__("../../utils/s-atoms/src/user/index.ts"),getCouponLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),useFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts");const _excluded=["nextStepName"];const src_usePersonalFreeCoupon=function usePersonalFreeCoupon(){const router=(0,dist.useRouter)(),redeemFreeCoupon=(0,useFreeCoupon.Z)(),[user]=(0,src_user.Z)();return react.useCallback((_ref=>{let{nextStepName}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);if(!0===(null==user?void 0:user.isLoggedIn)){const couponUrl=(0,getCouponLink.Z)(props);return redeemFreeCoupon(couponUrl,nextStepName)}{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"login",asPath:router.asPath,currentQueryParams:router.query});return router.push(pathName,asPath,{shallow:!0}),Promise.resolve()}}),[redeemFreeCoupon,router,null==user?void 0:user.isLoggedIn])}},"../../pp-hooks/s-pp-use-coupon/src/useRegularFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_useRegularFreeCoupon});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),src_user=__webpack_require__("../../utils/s-atoms/src/user/index.ts"),getCouponLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),src=__webpack_require__("../../hooks/s-use-config/src/index.ts"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),useFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts");const _excluded=["nextStepName"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const src_useRegularFreeCoupon=function useRegularFreeCoupon(){const router=(0,dist.useRouter)(),redeemFreeCoupon=(0,useFreeCoupon.Z)(),[user]=(0,src_user.Z)(),config=(0,src.Z)();return react.useCallback((async _ref=>{let{nextStepName}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);if(null!=user&&user.isLoggedIn){const confirmationUrl=config.get("msConfirmation"),headers=new Headers({Accept:"application/json","Content-Type":"application/json"});try{const token=await fetch(`${confirmationUrl}/generateConfirmation`,{method:"POST",body:JSON.stringify({confirmationParams:{email:user.userMail}}),headers}).then((res=>res.text()));if(!token)throw new Error("Token isn't valid");const couponUrl=(0,getCouponLink.Z)(_objectSpread(_objectSpread({},props),{},{token:decodeURIComponent(token)}));return redeemFreeCoupon(couponUrl,nextStepName)}catch(error){const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}else{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"login",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}return Promise.resolve()}),[config,redeemFreeCoupon,router,null==user?void 0:user.isLoggedIn,null==user?void 0:user.userMail])}},"../../pp-molecules/s-pp-header/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../pp-molecules/s-pp-header/src/PpHeader.tsx").Z},"../../pp-pages/s-pp-login-page/src/components/LoginForm/LoginForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>LoginForm});var _home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),_haaretz_s_button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../ds-atoms/s-button/src/index.ts"),_haaretz_s_formfield_description__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../ds-atoms/s-formfield-description/src/index.ts"),_haaretz_s_text_field__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../ds-atoms/s-text-field/src/TextField.tsx"),_haaretz_s_use_bi__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../hooks/s-use-bi/src/index.ts"),next_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),style9__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs"),_TermsCheckBox__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../pp-pages/s-pp-login-page/src/components/TermsCheckBox/index.ts");const _excluded=["setShowForgotPasswordModal","styleExtend"],_excluded2=["clearEmail","email","termsCheck","setShowForgotPasswordModal"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const c={descriptionWrapper:{display:"gSBWlu",flexWrap:"fyjYdE",justifyContent:"kJzccJ",width:"cRUUAa",fontSize:"gVscJz",lineHeight:"kvNqZl","@media all and (min-width:80em)":{fontSize:"fbDSck",lineHeight:"cIlhEA"}},field:{height:"iIftcP",width:"cRUUAa"},email:{"@media all and (min-width:80em)":{fontSize:"grQyFE",lineHeight:"gzgUVO"}},clearEmail:{paddingInlineStart:"dZKiZV",paddingInlineEnd:"ckIyll","@media all and (max-width:79.9375em)":{fontSize:"lfoXAV",lineHeight:"UYkYC"}},fullWidthColumn:{gridColumnStart:"DIEXk"},termsCheckBox:{marginTop:"cyerGB"},forgetPassword:{marginInlineEnd:"ihvpmL"}};function RequiredField(_ref){let{setShowForgotPasswordModal,styleExtend=[]}=_ref,props=(0,_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_ref,_excluded);const[state,setState]=react__WEBPACK_IMPORTED_MODULE_3__.useState("default"),descriptionId=react__WEBPACK_IMPORTED_MODULE_3__.useId(),inputRef=react__WEBPACK_IMPORTED_MODULE_3__.useRef(null);react__WEBPACK_IMPORTED_MODULE_3__.useEffect((()=>{inputRef.current&&inputRef.current.focus()}),[]);const isInvalid="default"!==state;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_haaretz_s_text_field__WEBPACK_IMPORTED_MODULE_6__.DO,{styleExtend:[c.field,...styleExtend],isInvalid,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_haaretz_s_text_field__WEBPACK_IMPORTED_MODULE_6__.Nl,_objectSpread(_objectSpread({},props),{},{describedBy:descriptionId,isInvalid,label:"סיסמה",type:"password","data-testid":"password-field",minLength:1,onInput:()=>{"default"!==state&&setState("default")},onInvalid:evt=>{evt.preventDefault(),setState(evt.currentTarget.value?"invalid":"empty")},ref:inputRef})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:(0,style9__WEBPACK_IMPORTED_MODULE_4__.Z)(c.descriptionWrapper),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_haaretz_s_formfield_description__WEBPACK_IMPORTED_MODULE_7__.Z,{id:descriptionId,isInvalid,children:"נא להזין את הסיסמה שאיתה נרשמתם"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_haaretz_s_button__WEBPACK_IMPORTED_MODULE_8__.ZP,{priority:"tertiary",variant:"brand",size:"small",styleExtend:[c.forgetPassword],onClick:()=>{setShowForgotPasswordModal(!0)},"data-testid":"forgot-password-btn",children:"שכחתי סיסמה"})]})]})}function LoginForm(_ref2){let{clearEmail,email,termsCheck,setShowForgotPasswordModal}=_ref2,props=(0,_home_runner_work_fe_fe_node_modules_pnpm_babel_runtime_7_22_10_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_ref2,_excluded2);const router=(0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)(),biAction=(0,_haaretz_s_use_bi__WEBPACK_IMPORTED_MODULE_9__.Z)(),restorecart=router.query.restorecart;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:(0,style9__WEBPACK_IMPORTED_MODULE_4__.Z)(c.email,c.fullWidthColumn),children:[email," ",restorecart?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_haaretz_s_button__WEBPACK_IMPORTED_MODULE_8__.ZP,{priority:"tertiary",styleExtend:[c.clearEmail],type:"button",variant:"brand",onClick:event=>{event.preventDefault();const biData="function"==typeof props.getBiData?props.getBiData():props.biData;clearEmail(),biData&&biAction(_objectSpread(_objectSpread({},biData),{},{action_id:20,feature:"Promotions logout",feature_type:"Marketing",newsletter_email:email}))},"data-testid":"change-email-btn",children:["(","התחברו עם אימייל אחר",")"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(RequiredField,{autoFocus:!0,required:!0,type:"password",name:"password",styleExtend:[c.fullWidthColumn],setShowForgotPasswordModal}),termsCheck?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TermsCheckBox__WEBPACK_IMPORTED_MODULE_10__.Z,{styleExtend:[c.fullWidthColumn,c.termsCheckBox]})]})}try{LoginForm.displayName="LoginForm",LoginForm.__docgenInfo={description:"",displayName:"LoginForm",props:{email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string"}},termsCheck:{defaultValue:null,description:"",name:"termsCheck",required:!0,type:{name:"boolean"}},clearEmail:{defaultValue:null,description:"",name:"clearEmail",required:!0,type:{name:"() => void"}},setShowForgotPasswordModal:{defaultValue:null,description:"",name:"setShowForgotPasswordModal",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},biData:{defaultValue:null,description:"",name:"biData",required:!1,type:{name:"BiDataOverrides | undefined"}},getBiData:{defaultValue:null,description:"",name:"getBiData",required:!1,type:{name:"(() => BiDataOverrides) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-pages/s-pp-login-page/src/components/LoginForm/LoginForm.tsx#LoginForm"]={docgenInfo:LoginForm.__docgenInfo,name:"LoginForm",path:"../../pp-pages/s-pp-login-page/src/components/LoginForm/LoginForm.tsx#LoginForm"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-pages/s-pp-login-page/src/components/RegistrationForm/RegistrationForm.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RegistrationForm});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),jsx_runtime=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/jsx-runtime.js"),src=__webpack_require__("../../ds-atoms/s-button/src/index.ts"),s_text_field_src=__webpack_require__("../../ds-atoms/s-text-field/src/index.ts"),s_use_bi_src=__webpack_require__("../../hooks/s-use-bi/src/index.ts");const src_nameValidator=function nameValidator(name,type){const ending="firstName"===type?"שם פרטי":"שם משפחה";if(!name)return`נא להזין ${ending}`;const digitRegex=new RegExp("\\d");return"string"!=typeof name||name.length<2||digitRegex.test(name)?"יש להזין שם המורכב מ-2 אותיות לפחות וללא מספרים":`נא להזין ${ending}`};const src_passwordValidator=function passwordValidator(password){return password?"string"!=typeof password||password.length<6?"יש להזין סיסמה בת 6 תווים ומעלה":"אנא הזינו סיסמה":"נא לבחור סיסמה שאיתה תתחברו לאתר"};var dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.10_next@13.5.4_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react=__webpack_require__("../../../node_modules/.pnpm/next@13.5.4_@babel+core@7.22.10_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react/index.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.2_rollup@2.79.1_webpack@5.88.2/node_modules/style9/index.mjs"),TermsCheckBox=__webpack_require__("../../pp-pages/s-pp-login-page/src/components/TermsCheckBox/index.ts");const _excluded=["styleExtend","onInput"],_excluded2=["clearEmail","email","termsCheck"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const c={email:{"@media all and (min-width:80em)":{fontSize:"ecfhKk",lineHeight:"klepka",fontWeight:"jRfRA_d"},"@media all and (min-width:102em)":{fontSize:"iswsIN",lineHeight:"lbqvfo"}},clearEmail:{paddingInlineStart:"dZKiZV",paddingInlineEnd:"ckIyll",":hover":{marginInlineStart:"hTmjlj",marginInlineEnd:"dmUSNM",paddingInlineStart:"gLJgVM",paddingInlineEnd:"dYeNjP"},":focus":{marginInlineStart:"djeZFJ",marginInlineEnd:"gsRcdM",paddingInlineStart:"ckuhUL",paddingInlineEnd:"iPoVcp"},"@media all and (max-width:79.9375em)":{paddingInlineStart:"jfXoVn",paddingInlineEnd:"eFybus"}},field:{height:"iIftcP",width:"cRUUAa"},fullWidthColumn:{gridColumnStart:"DIEXk"},termsCheckBox:{marginTop:"fClzDx"}},labelTexts={password:"סיסמה",firstName:"שם פרטי",lastName:"שם משפחה"},namePattern="^[a-zA-Z֐-׾ '\"`-]+$";function RequiredField(_ref){var _textFieldRef$current;let{styleExtend=[],onInput}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);const[state,setState]=react.useState("default"),textFieldRef=react.useRef(null),name=props.name,value=(null===(_textFieldRef$current=textFieldRef.current)||void 0===_textFieldRef$current?void 0:_textFieldRef$current.value)||"",description="password"===props.name?src_passwordValidator(value):src_nameValidator(value,props.name);return(0,jsx_runtime.jsx)(s_text_field_src.ZP,_objectSpread(_objectSpread({type:"text"},props),{},{description,isInvalid:"default"!==state,label:labelTexts[name],required:!0,onInput:event=>{"default"!==state&&setState("default"),"function"==typeof onInput&&onInput(event)},styleExtend:[c.field,...styleExtend],onInvalid:e=>{e.preventDefault(),setState(e.currentTarget.value?"invalid":"empty")},ref:textFieldRef}))}function onInputNameHandler(event){const input=event.currentTarget;input.value.trim()||(input.value="")}function RegistrationForm(_ref2){let{clearEmail,email,termsCheck}=_ref2,props=(0,objectWithoutProperties.Z)(_ref2,_excluded2);const router=(0,dist.useRouter)(),biAction=(0,s_use_bi_src.Z)(),restorecart=router.query.restorecart;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:(0,style9.Z)(c.email,c.fullWidthColumn),children:[email," ",restorecart?null:(0,jsx_runtime.jsxs)(src.ZP,{priority:"tertiary",styleExtend:[c.clearEmail],type:"button",variant:"brand",size:"small",onClick:event=>{event.preventDefault();const biData="function"==typeof props.getBiData?props.getBiData():props.biData;clearEmail(),biData&&biAction(_objectSpread(_objectSpread({},biData),{},{action_id:20,feature:"Promotions logout",feature_type:"Marketing",newsletter_email:email}))},children:["(","התחברו עם אימייל אחר",")"]})]}),(0,jsx_runtime.jsx)(RequiredField,{autoFocus:!0,name:"password",type:"password","data-testid":"password-field",minLength:6,styleExtend:[c.fullWidthColumn]}),(0,jsx_runtime.jsx)(RequiredField,{name:"firstName","data-testid":"first-name-field",minLength:2,maxLength:40,pattern:namePattern,onInput:onInputNameHandler}),(0,jsx_runtime.jsx)(RequiredField,{name:"lastName","data-testid":"last-name-field",minLength:2,maxLength:40,pattern:namePattern,onInput:onInputNameHandler}),termsCheck?null:(0,jsx_runtime.jsx)(TermsCheckBox.Z,{styleExtend:[c.fullWidthColumn,c.termsCheckBox]})]})}try{RegistrationForm.displayName="RegistrationForm",RegistrationForm.__docgenInfo={description:"",displayName:"RegistrationForm",props:{email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string"}},termsCheck:{defaultValue:null,description:"",name:"termsCheck",required:!0,type:{name:"boolean"}},clearEmail:{defaultValue:null,description:"",name:"clearEmail",required:!0,type:{name:"() => void"}},biData:{defaultValue:null,description:"",name:"biData",required:!1,type:{name:"BiDataOverrides | undefined"}},getBiData:{defaultValue:null,description:"",name:"getBiData",required:!1,type:{name:"(() => BiDataOverrides) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-pages/s-pp-login-page/src/components/RegistrationForm/RegistrationForm.tsx#RegistrationForm"]={docgenInfo:RegistrationForm.__docgenInfo,name:"RegistrationForm",path:"../../pp-pages/s-pp-login-page/src/components/RegistrationForm/RegistrationForm.tsx#RegistrationForm"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-pages/s-pp-login-page/src/components/TermsCheckBox/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../pp-pages/s-pp-login-page/src/components/TermsCheckBox/TermsCheckBox.tsx").Z},"../../pp-utils/s-pp-build-promotions-link/src/fetchChangePlan/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_fetchChangePlan});var getPurchaseServiceLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts");const getChangePlanLink=function getIFrameLink(_ref){let{msPurchaseUrl,productNumber,promotionNumber,saleCode}=_ref;const searchParams=new URLSearchParams({saleCode:`${saleCode}`,productId:`${productNumber}`,promotionNo:`${promotionNumber}`});return(0,getPurchaseServiceLink.Z)({msPurchaseUrl,searchParams,endpoint:"changePlan"})};const src_fetchChangePlan=function fetchChangePlan(props){const changePlanLink=getChangePlanLink(props),headers=new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"});return fetch(changePlanLink,{method:"GET",credentials:"include",headers})}},"../../pp-utils/s-pp-build-promotions-link/src/getAbandonedCartLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getAbandonedCartLink});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),getCommonParameters=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts"),getPurchaseServiceLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts");const _excluded=["msPurchaseUrl"];const src_getAbandonedCartLink=function getAbandonedCartLink(_ref){let{msPurchaseUrl}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);const searchParams=(0,getCommonParameters.Z)(props);return(0,getPurchaseServiceLink.Z)({msPurchaseUrl,searchParams,endpoint:"savePurchasePreferences"})}},"../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCommonParameters});var isFilledPpOffersStore=__webpack_require__("../../utils/s-type-predicates/src/isFilledPpOffersStore/index.ts");const src_getCommonParameters=function getCommonParameters(props){if(!(0,isFilledPpOffersStore.Z)(props))throw new Error("Offer not selected");const{productNumber,promotionNumber,saleCode,thankYouMailTemplate,approveDebtClaim,contentId}=props,optionalParams={utmCampaign:props.utmCampaign,utmContent:props.utmContent,utmMedium:props.utmMedium,utmSource:props.utmSource,couponId:props.couponId,personalCouponId:props.personalCouponId},params=new URLSearchParams({contentId,productId:productNumber.toString(),saleCode:saleCode.toString(),promotionNumber:promotionNumber.toString(),approveDebtClaim:String(!0===approveDebtClaim),thankYouEmailTemplate:thankYouMailTemplate,cgtype:"heb"});return Object.keys(optionalParams).forEach((name=>{const value=optionalParams[name];value&&params.append(name,value.toString())})),params}},"../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCouponLink});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),getCommonParameters=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts"),getPurchaseServiceLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts");const _excluded=["msPurchaseUrl","couponId","personalCouponId","token"];const src_getCouponLink=function getCouponLink(_ref){let{msPurchaseUrl,couponId,personalCouponId,token}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);const searchParams=(0,getCommonParameters.Z)(props);return personalCouponId?searchParams.append("personalCouponId",personalCouponId):couponId&&token&&(searchParams.append("couponId",couponId),searchParams.append("token",token)),(0,getPurchaseServiceLink.Z)({msPurchaseUrl,searchParams,endpoint:"okCoupon"})}},"../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getPurchaseServiceLink});const src_getPurchaseServiceLink=function getPurchaseServiceLink(_ref){let{endpoint,msPurchaseUrl,searchParams}=_ref;if(!msPurchaseUrl)throw new Error("A URL for the purchase microservice is required");return`${msPurchaseUrl}/${endpoint}?${searchParams.toString()}`}},"../../pp-utils/s-pp-build-promotions-link/src/getUtmQueryParameters/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getUtmQueryParameters});var discardNullableValues=__webpack_require__("../../utils/s-common-utils/src/discardNullableValues/index.ts");const src_getUtmQueryParameters=function getUtmQueryParameters(query){const{htm_source,htm_medium,htm_campaign,htm_content,utm_source,utm_medium,utm_campaign,utm_content}=query;return(0,discardNullableValues.Z)({utmCampaign:htm_campaign||utm_campaign,utmContent:htm_content||utm_content,utmMedium:htm_medium||utm_medium,utmSource:htm_source||utm_source})}},"../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_generatePath});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.22.10/node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const src_generatePath=function generatePath(_ref){let{nextStepName,asPath,searchParams,currentQueryParams,ignoreCurrentSearchParams=!1,extendQueryParams={}}=_ref;const[,queryPartFromPath]=asPath.split(/\?(.+)/),extendSearchParams=null==searchParams?void 0:searchParams.toString(),segmentPath=currentQueryParams.pathSegment?`/${currentQueryParams.pathSegment}`:"";return{asPath:`${segmentPath}/${nextStepName}${queryPartFromPath&&!ignoreCurrentSearchParams?`?${queryPartFromPath}${extendSearchParams?`&${extendSearchParams}`:""}`:extendSearchParams?`?${extendSearchParams}`:""}`,pathName:{pathname:`${segmentPath}/${nextStepName}`,query:_objectSpread(_objectSpread({},currentQueryParams),extendQueryParams)}}}},"../../pp-utils/s-pp-routing-utils/src/getCurrentStep/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCurrentStep});const src_getCurrentStep=function getCurrentStep(currentStepName,steps){if(!currentStepName||"string"!=typeof currentStepName)throw new Error("Step name isn't valid");if(null==steps||!steps.length)throw new Error("Steps is required array");const currentStepIndex=steps.findIndex((step=>step.name===currentStepName));if(currentStepIndex<0)throw new Error("Invalid current step");return{currentStep:steps[currentStepIndex],currentStepIndex}}},"../../pp-utils/s-pp-routing-utils/src/getFirstStep/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getFirstStep});const src_getFirstStep=function getFirstStep(steps){if(!Array.isArray(steps)||!steps.length)throw new Error('A "steps" array is required');return steps[0]}},"../../utils/s-common-utils/src/getRandomInt/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getRandomInt});const src_getRandomInt=function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}},"../../utils/s-generate-subscription-text/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src});const subscriptions={239:"Haaretz",243:"הארץ",273:"TheMarker",274:"משולב"};const src=function generateSubscriptionText(periodCalc,productNumber){return`מינוי ${subscriptions[productNumber]} במסלול תשלום ${periodCalc<12?"חודשי":"שנתי"}`}},"../../utils/s-type-predicates/src/isCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isCoupon});const src_isCoupon=function isCoupon(pageData){return pageData instanceof Object&&!(!pageData.personalCouponId&&!pageData.couponId)}},"../../utils/s-type-predicates/src/isFilledPpOffersStore/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isFilledPpOffersStore});const keysMap={periodCalc:!0,prices:!0,productNumber:!0,promotionNumber:!0,saleCode:!0,thankYouMailTemplate:!0,contentId:!0,paymentType:!0,offerType:!0};const src_isFilledPpOffersStore=function isFilledPpOffersStore(store){if(!(store instanceof Object))return!1;for(const key of Object.keys(keysMap))if(!(key in store))return!1;return!0}},"../../utils/s-type-predicates/src/isFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isFreeCoupon});const src_isFreeCoupon=function isFreeCoupon(couponOffer){return couponOffer instanceof Object&&"FREE"===couponOffer.paymentType}},"../../utils/s-type-predicates/src/isPersonalCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isPersonalCoupon});const src_isPersonalCoupon=function isPersonalCoupon(pageData){return pageData instanceof Object&&!!pageData.personalCouponId}}}]);
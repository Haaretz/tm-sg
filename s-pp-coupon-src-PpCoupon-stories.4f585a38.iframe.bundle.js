"use strict";(self.webpackChunk_haaretz_a_tm_sg=self.webpackChunk_haaretz_a_tm_sg||[]).push([[4726],{"../../pp-organisms/s-pp-coupon/src/PpCoupon.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Overview:()=>Overview,__namedExportsOrder:()=>__namedExportsOrder,default:()=>PpCoupon_stories});var esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.0.0-rc.3-next-e7d0053e6-20220325/node_modules/react/index.js"),defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.19.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.14.0_rollup@2.79.1/node_modules/style9/index.mjs"),s_button_src=__webpack_require__("../../ds-atoms/s-button/src/index.tsx"),s_icon_src=__webpack_require__("../../ds-atoms/s-icon/src/index.tsx");const s_text_field_with_button_src=__webpack_require__("../../ds-molecules/s-text-field-with-button/src/TextFieldwithButton.tsx").Z;try{src.displayName="src",src.__docgenInfo={description:"",displayName:"src",props:{btnContent:{defaultValue:null,description:"The text of the button",name:"btnContent",required:!0,type:{name:"ReactNode"}},btnProps:{defaultValue:null,description:"A subset of the `ButtonProps` type from `@haaretz/s-button`\n(sans the ones irrelevant to this component).\nSee [the Button component](/?path=%2Fdocs%2Fatoms-button--overview) for more details.",name:"btnProps",required:!1,type:{name:"ButtonProps | undefined"}},btnRef:{defaultValue:null,description:"A reference to the button element",name:"btnRef",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null | undefined"}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\n\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyTextField(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <TextField\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:null,description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<TextField styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},variant:{defaultValue:null,description:"Sets the basic visual appearance of the input.\n@defaultValue 'default'",name:"variant",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"default"'},{value:'"inverse"'}]}},opaque:{defaultValue:null,description:"Give input a solid opaque background\n@defaultValue false",name:"opaque",required:!1,type:{name:"boolean | undefined"}},state:{defaultValue:null,description:"The input's functional state\n@defaultValue 'default'",name:"state",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"disabled"'},{value:'"default"'}]}},isInvalid:{defaultValue:null,description:"Indicate the input is in an invalid state",name:"isInvalid",required:!1,type:{name:"boolean | undefined"}},required:{defaultValue:null,description:"Indicates if the input is required\n@defaultValue false",name:"required",required:!1,type:{name:"boolean | undefined"}},startIcon:{defaultValue:null,description:"An icon component to place at the beginning of the input.",name:"startIcon",required:!1,type:{name:"ReactNode"}},endIcon:{defaultValue:null,description:"An icon component to place at the end of the input.",name:"endIcon",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"The input's label",name:"label",required:!1,type:{name:"string | undefined"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"number"'},{value:'"text"'},{value:'"search"'},{value:'"tel"'},{value:'"email"'},{value:'"password"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../ds-molecules/s-text-field-with-button/src/index.tsx#src"]={docgenInfo:src.__docgenInfo,name:"src",path:"../../ds-molecules/s-text-field-with-button/src/index.tsx#src"})}catch(__react_docgen_typescript_loader_error){}try{_TextFieldWithButton.displayName="_TextFieldWithButton",_TextFieldWithButton.__docgenInfo={description:"",displayName:"_TextFieldWithButton",props:{btnContent:{defaultValue:null,description:"The text of the button",name:"btnContent",required:!0,type:{name:"ReactNode"}},btnProps:{defaultValue:null,description:"A subset of the `ButtonProps` type from `@haaretz/s-button`\n(sans the ones irrelevant to this component).\nSee [the Button component](/?path=%2Fdocs%2Fatoms-button--overview) for more details.",name:"btnProps",required:!1,type:{name:"ButtonProps | undefined"}},btnRef:{defaultValue:null,description:"A reference to the button element",name:"btnRef",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null | undefined"}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\n\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyTextField(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <TextField\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:null,description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<TextField styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},variant:{defaultValue:null,description:"Sets the basic visual appearance of the input.\n@defaultValue 'default'",name:"variant",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"default"'},{value:'"inverse"'}]}},opaque:{defaultValue:null,description:"Give input a solid opaque background\n@defaultValue false",name:"opaque",required:!1,type:{name:"boolean | undefined"}},state:{defaultValue:null,description:"The input's functional state\n@defaultValue 'default'",name:"state",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"disabled"'},{value:'"default"'}]}},isInvalid:{defaultValue:null,description:"Indicate the input is in an invalid state",name:"isInvalid",required:!1,type:{name:"boolean | undefined"}},required:{defaultValue:null,description:"Indicates if the input is required\n@defaultValue false",name:"required",required:!1,type:{name:"boolean | undefined"}},startIcon:{defaultValue:null,description:"An icon component to place at the beginning of the input.",name:"startIcon",required:!1,type:{name:"ReactNode"}},endIcon:{defaultValue:null,description:"An icon component to place at the end of the input.",name:"endIcon",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"The input's label",name:"label",required:!1,type:{name:"string | undefined"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"number"'},{value:'"text"'},{value:'"search"'},{value:'"tel"'},{value:'"email"'},{value:'"password"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../ds-molecules/s-text-field-with-button/src/index.tsx#_TextFieldWithButton"]={docgenInfo:_TextFieldWithButton.__docgenInfo,name:"_TextFieldWithButton",path:"../../ds-molecules/s-text-field-with-button/src/index.tsx#_TextFieldWithButton"})}catch(__react_docgen_typescript_loader_error){}var __jsx=react.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const c_base={},c_successDiv={justifyContent:"IVbXa",textAlign:"kooHYa"},c_successText={alignItems:"foGVKH",color:"eNHGkV",display:"gSBWlu",justifyContent:"IVbXa",fontSize:"iKjpVA",lineHeight:"cVaJzg"},c_checkCircle={marginInlineEnd:"hrNAzC",display:"gSBWlu",justifyContent:"IVbXa",alignItems:"foGVKH",width:"bTRldR",aspectRatio:"eUirwo",borderTopLeftRadius:"eCJvpO",borderTopRightRadius:"KuLii",borderBottomRightRadius:"cPOOyy",borderBottomLeftRadius:"dJEuaT",backgroundColor:"gEmziR",fontSize:"dPVLzs"};function PpCoupon_PpCoupon({onUpdateCoupon}){const[componentToShow,setComponentToShow]=react.useState("textfield"),[errorMsg,setErrorMsg]=react.useState(""),[btnState,setBtnState]=react.useState("auto"),[btnBusyNotice,setBtnBusyNotice]=react.useState(""),inputRef=react.useRef(null),onCancellation=react.useCallback((_=>{errorMsg&&setErrorMsg(""),"success"===componentToShow&&setComponentToShow("textfield"),inputRef.current&&(inputRef.current.value="")}),[errorMsg,componentToShow]),checkCoupon=react.useCallback((_=>{var _inputRef$current;const couponValue=(null==inputRef||null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current?void 0:_inputRef$current.value)||"";setBtnState("busy"),setBtnBusyNotice("מעדכן קופון"),errorMsg&&setErrorMsg(""),setTimeout((()=>{setBtnState("auto"),setBtnBusyNotice(""),"notCoupon"===couponValue?setErrorMsg("הקופון אינו תקין"):(null==onUpdateCoupon||onUpdateCoupon(couponValue),setComponentToShow("success"))}),2e3)}),[errorMsg,onUpdateCoupon]),onInput=react.useCallback((evt=>{evt.currentTarget.value&&setErrorMsg("")}),[]);return __jsx("div",{className:(0,style9.Z)(c_base)},"textfield"===componentToShow?__jsx(s_text_field_with_button_src,{btnContent:"שליחה",label:"קופון",description:errorMsg||"נא להזין קופון הנחה",isInvalid:!!errorMsg,onChange:onInput,btnProps:_objectSpread({variant:"neutral",onClick:checkCoupon},"busy"===btnState?{state:btnState,busyNotice:btnBusyNotice}:{state:btnState}),type:"text",ref:inputRef}):__jsx("div",{className:(0,style9.Z)(c_successDiv)},__jsx("div",{className:(0,style9.Z)(c_successText)},__jsx("span",{className:(0,style9.Z)(c_checkCircle)},__jsx(s_icon_src.Z,{icon:"check",variant:"inverse"})),"הקופון הוזן בהצלחה!"),__jsx(s_button_src.ZP,{variant:"brand",size:"small",priority:"tertiary",onClick:onCancellation},"להסרת הקופון")))}try{PpCoupon_PpCoupon.displayName="PpCoupon",PpCoupon_PpCoupon.__docgenInfo={description:"",displayName:"PpCoupon",props:{onUpdateCoupon:{defaultValue:null,description:"",name:"onUpdateCoupon",required:!1,type:{name:"((coupon: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-organisms/s-pp-coupon/src/PpCoupon.tsx#PpCoupon"]={docgenInfo:PpCoupon_PpCoupon.__docgenInfo,name:"PpCoupon",path:"../../pp-organisms/s-pp-coupon/src/PpCoupon.tsx#PpCoupon"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("../../../node_modules/.pnpm/react@18.0.0-rc.3-next-e7d0053e6-20220325/node_modules/react/jsx-runtime.js"),esm=__webpack_require__("../../../node_modules/.pnpm/@mdx-js+react@1.6.22_4jdp6okly7h64wr46jw5nzsnhe/node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("../../../node_modules/.pnpm/@storybook+addon-docs@6.5.12_ir3quccc6i62x6qn6jjhyjjiey/node_modules/@storybook/addon-docs/dist/esm/index.js");function _createMdxContent(props){const _components=Object.assign({h1:"h1",h2:"h2",p:"p",strong:"strong",code:"code",pre:"pre",h4:"h4",h3:"h3"},(0,esm.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{children:"PpCoupon"}),"\n",(0,jsx_runtime.jsx)("br",{}),"\n","\n","\n","\n",(0,jsx_runtime.jsx)(_components.h2,{children:"Installation"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:(0,jsx_runtime.jsxs)(_components.strong,{children:["Make sure the package you use ",(0,jsx_runtime.jsx)(_components.code,{children:"PpCoupon"})," in has ",(0,jsx_runtime.jsx)(_components.code,{children:"@haaretz/s-pp-coupon"})," listed\nin its ",(0,jsx_runtime.jsx)(_components.code,{children:"package.json"}),"'s ",(0,jsx_runtime.jsx)(_components.code,{children:"dependencies"})," field:"]})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-js",children:'// package.json\n{\n  // ...\n  "dependencies": {\n    "@haaretz/s-pp-coupon": "workspace:*"\n    // ...\n  }\n}\n'})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Because internal monorepo packages are wired up using TypeScript's path aliases\nfeature in dev mode, importing ",(0,jsx_runtime.jsx)(_components.code,{children:"PpCoupon"})," without listing it as a dependency\nwill work in dev mode, but will fail in production. There should be a\n",(0,jsx_runtime.jsx)(_components.code,{children:"import/no-unresolved"})," eslint error when trying to import it when it is not\nlisted as a dependency."]}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"You can then import it like this:"}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-js",children:"import PpCoupon from '@haaretz/s-pp-coupon';\n"})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{children:"Overview"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"Manages entry of coupon on purchase page."}),"\n",(0,jsx_runtime.jsx)(_components.h4,{children:"pay attention that the fetch function in the component"}),"\n",(0,jsx_runtime.jsx)(_components.h4,{children:"is a mock function and needs to be fixed when true database will be availible."}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"On Coupon update, the purchase page should change and cards should rerender with\nnew prices. Therefore the function onCouponUpdate. which is controlled from the\noutside."}),"\n",(0,jsx_runtime.jsx)(dist_esm.Xz,{withToolbar:!0,children:(0,jsx_runtime.jsx)(dist_esm.oG,{id:"purchase-organisms-ppcoupon--overview"})}),"\n",(0,jsx_runtime.jsx)(_components.h3,{children:"Props"}),"\n",(0,jsx_runtime.jsx)(dist_esm.$4,{story:"^"})]})}const PpCoupon_doc=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,esm.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)};var PpCoupon_stories_jsx=react.createElement;const PpCoupon_stories={component:PpCoupon_PpCoupon,title:"Purchase/Organisms/PpCoupon",args:{inlineStyle:{},styleExtend:[]},argTypes:{styleExtend:{control:!1}},parameters:{docs:{page:PpCoupon_doc}}},Overview=args=>PpCoupon_stories_jsx(PpCoupon_PpCoupon,(0,esm_extends.Z)({},args,{onUpdateCoupon:coupon=>console.log("updated")})),__namedExportsOrder=["Overview"];try{ComponentStory.displayName="ComponentStory",ComponentStory.__docgenInfo={description:"For the common case where a (CSFv2) story is a simple component that receives args as props:\n\n```tsx\nconst Template: ComponentStory<typeof Button> = (args) => <Button {...args} />\n```\n\nNOTE: this is an alias for `ComponentStoryFn`.\nIn Storybook v7, `ComponentStory` will alias `ComponentStoryObj`",displayName:"ComponentStory",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-organisms/s-pp-coupon/src/PpCoupon.stories.tsx#ComponentStory"]={docgenInfo:ComponentStory.__docgenInfo,name:"ComponentStory",path:"../../pp-organisms/s-pp-coupon/src/PpCoupon.stories.tsx#ComponentStory"})}catch(__react_docgen_typescript_loader_error){}}}]);
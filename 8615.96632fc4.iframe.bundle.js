"use strict";(self.webpackChunk_haaretz_a_tm_sg=self.webpackChunk_haaretz_a_tm_sg||[]).push([[8615],{"../../ds-atoms/s-button/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../ds-atoms/s-button/src/Button.tsx").ZP},"../../ds-atoms/s-rich-text/src/RichText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>DEFAULT_ELEMENT,Z:()=>RichText});var esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.1_rollup@2.79.1_webpack@5.74.0/node_modules/style9/index.mjs");const _excluded=["as","inlineStyle","styleExtend","content","strongStyleExtend"];var __jsx=react.createElement;const c_base={},c_em={fontStyle:"foKnQA"},c_strong={fontWeight:"iLdtFu"},c_mark={backgroundColor:"hCbFkR"},c_link={outlineWidth:"eGCNgh",textDecorationLine:"dLUwcr",textDecorationColor:"dDxYlR",textDecorationThickness:"hnHEBj",textUnderlineOffset:"cEqDEh",transitionProperty:"iRietU",transitionDuration:"gAhwfJ",transitionTimingFunction:"iaemGh",":hover":{color:"klOnSG"},":focus":{color:"bsfUtT"}},c_u={textDecorationLine:"dLUwcr",textDecorationSkip:"jqXfau"},DEFAULT_ELEMENT="p",allowedElements=["p","ul","ol","li","h3","span"];function RichText(_ref){let{as,inlineStyle,styleExtend=[],content,strongStyleExtend=[]}=_ref,attrs=(0,objectWithoutProperties.Z)(_ref,_excluded);const Element=as||DEFAULT_ELEMENT;if("string"==typeof as&&!allowedElements.includes(as)||"function"==typeof as)throw new TypeError('<RichTextProps /> may only render a "p", "h3", "ul", "ol" or  a "li" element.\nYou passed something else to the "as" prop');const html=function replaceAll(str,mapObj){if("string"!=typeof str)return"";const replaceStr=new RegExp(Object.keys(mapObj).join("|"),"gi");return str.replace(replaceStr,(matched=>mapObj[matched.toLowerCase()]||"#placeholder#"))}(content,{"#em#":(0,style9.Z)(c_em),"#strong#":(0,style9.Z)(c_strong,...strongStyleExtend),"#a#":(0,style9.Z)(c_link),"#mark#":(0,style9.Z)(c_mark),"#u#":(0,style9.Z)(c_u)});return __jsx(Element,(0,esm_extends.Z)({},attrs,{className:(0,style9.Z)(c_base,...styleExtend),style:inlineStyle,dangerouslySetInnerHTML:{__html:html}}))}try{RichText.displayName="RichText",RichText.__docgenInfo={description:"",displayName:"RichText",props:{as:{defaultValue:null,description:"The HTML element (`${AllowedElements}`) the `<RichText />` will be rendered as.\n@defaultValue 'p'",name:"as",required:!1,type:{name:'(ElementType<any> & (ComponentType<any> | "h3" | "li" | "ol" | "p" | "span" | "ul")) | undefined'}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyRichText(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <RichText\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:{value:"[]"},description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<RichText styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}},strongStyleExtend:{defaultValue:{value:"[]"},description:"Same as styleExtend for strong class.",name:"strongStyleExtend",required:!1,type:{name:"StyleExtend | undefined"}},content:{defaultValue:null,description:"The html string to set the elment's innerHtml.\nHas to be replaced with style9 classes first.",name:"content",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"HtmlElement id attribute.",name:"id",required:!1,type:{name:"string | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../ds-atoms/s-rich-text/src/RichText.tsx#RichText"]={docgenInfo:RichText.__docgenInfo,name:"RichText",path:"../../ds-atoms/s-rich-text/src/RichText.tsx#RichText"})}catch(__react_docgen_typescript_loader_error){}},"../../ds-atoms/s-rich-text/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../ds-atoms/s-rich-text/src/RichText.tsx").Z},"../../ds-molecules/s-modal/src/Modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_Modal});var esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.1_rollup@2.79.1_webpack@5.74.0/node_modules/style9/index.mjs");const _excluded=["children","inlineStyle","isOpen","labelledBy","onClick","onToggle","onOpen","onClose","styleExtend"];var __jsx=react.createElement;const c_wrapper={position:"bEvNbr",bottom:"bLIxaN",left:"bOjOhu",right:"kLKrsq",top:"WhAZY",zIndex:"iYxGWt"},Modal=react.forwardRef((function Modal(_ref,ref){let{children,inlineStyle,isOpen=!1,labelledBy,onClick,onToggle,onOpen,onClose:onCloseProp,styleExtend=[]}=_ref,attrs=(0,objectWithoutProperties.Z)(_ref,_excluded);const currentOpenState=react.useRef(!1),_modalRef=react.useRef(null),modalRef=null!=ref?ref:_modalRef;react.useEffect((()=>{const modalElem="current"in modalRef&&modalRef.current;modalElem&&(isOpen&&!currentOpenState.current?(modalElem.showModal(),currentOpenState.current=!0,onOpen&&onOpen(modalElem),onToggle&&onToggle(!0)):!isOpen&&currentOpenState.current&&(modalElem.close(),currentOpenState.current=!1))}),[isOpen,onOpen,onToggle,modalRef]);const onClose=react.useCallback((evt=>{currentOpenState.current=!1,onCloseProp&&onCloseProp(evt),onToggle&&onToggle(!1)}),[onCloseProp,onToggle]),handleClick=react.useCallback((evt=>{evt.target===evt.currentTarget&&evt.currentTarget.close(),onClick&&onClick(evt)}),[onClick]);return __jsx("dialog",(0,esm_extends.Z)({ref:modalRef,onClick:handleClick,tabIndex:-1,onClose},attrs,{"aria-labelledby":labelledBy||void 0,className:(0,style9.Z)(...styleExtend),style:inlineStyle}),__jsx("div",{className:(0,style9.Z)(c_wrapper)}),children)})),src_Modal=Modal;try{Modal.displayName="Modal",Modal.__docgenInfo={description:"",displayName:"Modal",props:{children:{defaultValue:null,description:"The Children to be rendered inside `<Modal>`",name:"children",required:!1,type:{name:"ReactNode"}},labelledBy:{defaultValue:null,description:"The ID of the element (usually an h*) that is the title of the modal.\n\nIn the **RARE** cases where labeling isn't required, manually pass `null`.",name:"labelledBy",required:!0,type:{name:"string | null"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the modal is open or closed",name:"isOpen",required:!1,type:{name:"boolean | undefined"}},onToggle:{defaultValue:null,description:"A callback that is fired whenever the modal is opened or closed,\nand takes an `isOpen` boolean argument indicating if the modal is open",name:"onToggle",required:!1,type:{name:"((isOpen: boolean) => void) | undefined"}},onOpen:{defaultValue:null,description:"A callback that's fired whenever a modal window is opened and passed\na reference to the modal's underlying `dialog` element.",name:"onOpen",required:!1,type:{name:"((elem: HTMLDialogElement) => void) | undefined"}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyModal(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <Modal\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:{value:"[]"},description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<Modal styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../ds-molecules/s-modal/src/Modal.tsx#Modal"]={docgenInfo:Modal.__docgenInfo,name:"Modal",path:"../../ds-molecules/s-modal/src/Modal.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}},"../../hooks/s-use-bi/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>s_use_bi_src});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../hooks/s-use-config/src/index.ts"),useBiDataContext=__webpack_require__("../../hooks/s-use-bi/src/useBiDataContext.tsx");const s_use_bi_src=function useBi(){let biUrl,biType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"action";const config=(0,src.Z)(),biServer=config.get("bIServer");switch(biType){case"impression":biUrl="".concat(biServer,"/impressionPlain");break;case"pageview":biUrl="".concat(biServer,"/requestPlain");break;default:biUrl="".concat(biServer,"/actionPlain")}const contextBiDataPromise=(0,useBiDataContext.Z)(),collectData=react.useCallback((userBiData=>{contextBiDataPromise.then((contextBiData=>{var _window$navigator;const{additional_info}=userBiData;additional_info&&"object"==typeof additional_info&&(userBiData.additional_info=JSON.stringify(additional_info));const finalBiData=Object.assign({},contextBiData,userBiData);null===(_window$navigator=window.navigator)||void 0===_window$navigator||_window$navigator.sendBeacon(biUrl,JSON.stringify(finalBiData))}))}),[biUrl,contextBiDataPromise]);return collectData}},"../../hooks/s-use-cookie/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src});var useQuery=__webpack_require__("../../../node_modules/.pnpm/@tanstack+react-query@4.24.4_react-dom@18.2.0_react@18.2.0/node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),cookieToMap=__webpack_require__("../../utils/s-cookie-utils/src/cookieToMap/index.ts");const messageCacheKey=["HtzCookie"];function cookieDispenserFactory(cookie){return function cookieDispenser(){const cookieMap=(0,cookieToMap.Z)(cookie,!0),{ppResponseMessage,_hs_ud:hsud}=cookieMap;return{ppResponseMessage,hsud}}}function useCookie(options){return(0,useQuery.a)(messageCacheKey,cookieDispenserFactory("undefined"!=typeof document?document.cookie:""),options)}useCookie.cacheKey=messageCacheKey,useCookie.cookieDispenserFactory=cookieDispenserFactory;const src_useCookie=useCookie;try{useCookie.displayName="useCookie",useCookie.__docgenInfo={description:"",displayName:"useCookie",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../hooks/s-use-cookie/src/useCookie.tsx#useCookie"]={docgenInfo:useCookie.__docgenInfo,name:"useCookie",path:"../../hooks/s-use-cookie/src/useCookie.tsx#useCookie"})}catch(__react_docgen_typescript_loader_error){}const src=src_useCookie},"../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_useFreeCoupon});var src=__webpack_require__("../../pp-hooks/s-use-pp-message/src/index.ts"),setSessionCookie=__webpack_require__("../../utils/s-cookie-utils/src/setSessionCookie/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts");const keysMap={messageType:!0,title:!0,instructions:!0,action:!0,ctaType:!0,cta:!0,link:!1};const src_isPpMessage=function isPpMessage(message){if(!(message instanceof Object))return!1;for(const key of Object.keys(keysMap))if(keysMap[key]&&!message[key])return!1;return!0};var dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.2_next@13.3.0_react@18.2.0/node_modules/next-router-mock/dist/index.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),s_consts_src=__webpack_require__("../../shared/s-consts/src/index.ts"),use_user=__webpack_require__("../../hooks/s-use-user/src/use-user/index.ts");const src_useFreeCoupon=function useFreeCoupon(){const router=(0,dist.useRouter)(),{refetch}=(0,use_user.Z)();return react.useCallback((async(couponUrl,nextStepName)=>{const headers=new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"});try{const data=await fetch(couponUrl,{method:"GET",credentials:"include",headers}),json=await data.json();if(src_isPpMessage(json)&&(0,setSessionCookie.Z)(src.Z.cookieName,JSON.stringify(json)),"SUCCESSFUL_PURCHASE_COUPON"===json.messageType){const{pathName,asPath}=(0,generatePath.Z)({nextStepName,asPath:router.asPath,currentQueryParams:router.query});await refetch(),router.push(pathName,asPath,{shallow:!0})}else{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}catch(error){console.error(error.message),(0,setSessionCookie.Z)(src.Z.cookieName,JSON.stringify(s_consts_src.Z));const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}),[router,refetch])}},"../../pp-hooks/s-pp-use-coupon/src/usePersonalFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_usePersonalFreeCoupon});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),getCouponLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts"),use_user=__webpack_require__("../../hooks/s-use-user/src/use-user/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.2_next@13.3.0_react@18.2.0/node_modules/next-router-mock/dist/index.js"),useFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts");const _excluded=["nextStepName"];const src_usePersonalFreeCoupon=function usePersonalFreeCoupon(){const router=(0,dist.useRouter)(),redeemFreeCoupon=(0,useFreeCoupon.Z)(),{data:userData}=(0,use_user.Z)();return react.useCallback((_ref=>{let{nextStepName}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);if(!0===(null==userData?void 0:userData.isLoggedIn)){const couponUrl=(0,getCouponLink.Z)(props);return redeemFreeCoupon(couponUrl,nextStepName)}{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"login",asPath:router.asPath,currentQueryParams:router.query});return router.push(pathName,asPath,{shallow:!0}),Promise.resolve()}}),[redeemFreeCoupon,router,null==userData?void 0:userData.isLoggedIn])}},"../../pp-hooks/s-pp-use-coupon/src/useRegularFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_useRegularFreeCoupon});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),getCouponLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts"),dist=__webpack_require__("../../../node_modules/.pnpm/next-router-mock@0.9.2_next@13.3.0_react@18.2.0/node_modules/next-router-mock/dist/index.js"),use_user=__webpack_require__("../../hooks/s-use-user/src/use-user/index.ts"),src=__webpack_require__("../../hooks/s-use-config/src/index.ts"),s_use_pp_message_src=__webpack_require__("../../pp-hooks/s-use-pp-message/src/index.ts"),setSessionCookie=__webpack_require__("../../utils/s-cookie-utils/src/setSessionCookie/index.ts"),generatePath=__webpack_require__("../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts"),s_consts_src=__webpack_require__("../../shared/s-consts/src/index.ts"),useFreeCoupon=__webpack_require__("../../pp-hooks/s-pp-use-coupon/src/useFreeCoupon/index.ts");const _excluded=["nextStepName"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const src_useRegularFreeCoupon=function useRegularFreeCoupon(){const router=(0,dist.useRouter)(),redeemFreeCoupon=(0,useFreeCoupon.Z)(),{data:userData}=(0,use_user.Z)(),config=(0,src.Z)();return react.useCallback((async _ref=>{let{nextStepName}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);if(null!=userData&&userData.isLoggedIn){const confirmationUrl=config.get("msConfirmation"),headers=new Headers({Accept:"application/json","Content-Type":"application/json"});try{const token=await fetch("".concat(confirmationUrl,"/generateConfirmation"),{method:"POST",body:JSON.stringify({confirmationParams:{email:userData.userName}}),headers}).then((res=>res.text()));if(!token)throw new Error("Token isn't valid");const couponUrl=(0,getCouponLink.Z)(_objectSpread(_objectSpread({},props),{},{token:decodeURIComponent(token)}));return redeemFreeCoupon(couponUrl,nextStepName)}catch(error){(0,setSessionCookie.Z)(s_use_pp_message_src.Z.cookieName,JSON.stringify(s_consts_src.Z));const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"error",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}}else{const{pathName,asPath}=(0,generatePath.Z)({nextStepName:"login",asPath:router.asPath,currentQueryParams:router.query});router.push(pathName,asPath,{shallow:!0})}return Promise.resolve()}),[config,redeemFreeCoupon,router,null==userData?void 0:userData.isLoggedIn,null==userData?void 0:userData.userName])}},"../../pp-hooks/s-use-pp-message/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>s_use_pp_message_src});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),src=__webpack_require__("../../hooks/s-use-cookie/src/index.ts"),s_consts_src=__webpack_require__("../../shared/s-consts/src/index.ts");const src_clearCookie=function clearCookie(cookieName){document.cookie="".concat(cookieName,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.").concat(s_consts_src.Kn,";")},defaultMessage={messageType:"",title:"",instructions:"",action:0,ctaType:"link",cta:"חזרה לדף הבית",link:"https://www.themarker.com"};function usePPMessage(){var _cookie$data;const ppMessage=null===(_cookie$data=(0,src.Z)().data)||void 0===_cookie$data?void 0:_cookie$data.ppResponseMessage;return react.useEffect((()=>{ppMessage&&src_clearCookie("promotions-response-message")}),[ppMessage]),ppMessage||defaultMessage}usePPMessage.cookieName="promotions-response-message";const s_use_pp_message_src=usePPMessage},"../../pp-organisms/s-pp-modal/src/PpModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>PpModal});var esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),style9=__webpack_require__("../../../node_modules/.pnpm/style9@0.18.1_rollup@2.79.1_webpack@5.74.0/node_modules/style9/index.mjs");const src=__webpack_require__("../../ds-molecules/s-modal/src/Modal.tsx").Z;var s_click_area_src=__webpack_require__("../../ds-atoms/s-click-area/src/index.ts"),s_icon_src=__webpack_require__("../../ds-atoms/s-icon/src/index.ts");const _excluded=["children","isOpen","labelledBy","styleExtend","inlineStyle","onToggle","closeBtnOnClick"];var __jsx=react.createElement;const c={base:{borderTopStyle:"jAobFs",borderRightStyle:"dQbyJV",borderBottomStyle:"oTbqa",borderLeftStyle:"gwsGKP",borderTopLeftRadius:"kjdjaJ",borderTopRightRadius:"OUBEB",backgroundColor:"hXoEex",paddingTop:"icKiSN",paddingInlineStart:"dwXqlO",paddingInlineEnd:"kwGEcy",paddingBottom:"izetJs",overflowX:"dUvWpK",overflowY:"hRLVFh","::backdrop":{"--bgc":"jnXWKX",backdropFilter:"fNdmJG",backgroundColor:"jvkdtx",animationName:"bCIYPq",animationPlayState:"hiPugQ",animationDuration:"iGOlqW",animationDirection:"GNuRI",animationFillMode:"dRDwYY"},"@media all and (max-width:37.4375em)":{marginBottom:"gVzGtB",minWidth:"hkWxRA"},"@media all and (min-width:37.5em)":{"::backdrop":{"--bgc":"iJTkLm"},borderTopLeftRadius:"jYVHaP",borderTopRightRadius:"gTufyh",borderBottomRightRadius:"bdSBAK",borderBottomLeftRadius:"fSITDU",width:"cHYRhi"},"@media all and (min-width:64em)":{width:"kncOoy"}},onOpenKeyFrames:{"--trsfrm-a":"gvOsMs","--trsfrm-b":"ecTztE",animationName:"cnLsGC",animationDuration:"dbaUeh",animationFillMode:"hMOwcK",animationTimingFunction:"dDrDcI",opacity:"UXrzu","@media all and (min-width:37.5em)":{"--trsfrm-a":"gbAXaG","--trsfrm-b":"ekGltn"}},closeBtnClickArea:{display:"gSBWlu",justifyContent:"IVbXa",alignItems:"foGVKH",insetInlineEnd:"laZGxq",position:"bEvNbr",top:"WhAZY"},closeButtonCircle:{backgroundColor:"fIcjCT",borderTopLeftRadius:"eCJvpO",borderTopRightRadius:"KuLii",borderBottomRightRadius:"cPOOyy",borderBottomLeftRadius:"dJEuaT",display:"gSBWlu",justifyContent:"IVbXa",alignItems:"foGVKH",height:"fdoezE",width:"byQvkk"}};function PpModal(_ref){let{children,isOpen=!1,labelledBy,styleExtend=[],inlineStyle,onToggle,closeBtnOnClick}=_ref,attrs=(0,objectWithoutProperties.Z)(_ref,_excluded);return __jsx(src,(0,esm_extends.Z)({onToggle,isOpen,styleExtend:[c.base,isOpen&&c.onOpenKeyFrames,...styleExtend],inlineStyle},attrs,{labelledBy}),__jsx(s_click_area_src.ZP,{size:"large",onClick:closeBtnOnClick,styleExtend:[c.closeBtnClickArea],"data-testid":"pp-modal-close-btn"},__jsx("div",{className:(0,style9.Z)(c.closeButtonCircle)},__jsx(s_icon_src.Z,{icon:"close",variant:"inverse"}))),children)}try{PpModal.displayName="PpModal",PpModal.__docgenInfo={description:"",displayName:"PpModal",props:{children:{defaultValue:null,description:"The Children to be rendered inside `<PpModal>`",name:"children",required:!1,type:{name:"ReactNode"}},inlineStyle:{defaultValue:null,description:"CSS declarations to be set as inline `style` on the\nhtml element.\n\nBy setting values of CSS Custom Properties based on\nprops or state in the consuming component (where\nthe value of `inlineStyle` is passed), `inlineStyle`\ncan be used as an API contract for setting dynamic\nvalues to styles created with `style9.create()`:\n@example ```ts\nimport s9 from 'style9';\nconst { styleExtend, } = s9.create({\n  styleExtend: {\n    color: 'var(--color-based-on-prop)',\n  },\n});\n\nfunction MyModal(props) {\n  const inlineStyle = {\n    '--color-based-on-prop': props.color,\n  },\n\n  return (\n   <Modal\n     styleExtend={[ styleExtend, ]}\n     inlineStyle={inlineStyle}\n   />\n  );\n}\n```",name:"inlineStyle",required:!1,type:{name:"InlineStyles | undefined"}},styleExtend:{defaultValue:{value:"[]"},description:"An array of `Style`s created by `style9.create()`.\nWARNING: **_do not_** pass simple CSS-in-JS object.\nThe items in the array must be created with Style9's\n`create` function.\nThe array can also hold falsy values to assist with\nconditional inclusion of `Style`s:\n@example ```ts\nconst { foo, bar, } = s9.create({ foo: { ... }, bar: { ... }, });\n<Modal styleExtend={[ someCondition && foo, bar, ]} />\n```",name:"styleExtend",required:!1,type:{name:"StyleExtend | undefined"}},isOpen:{defaultValue:{value:"false"},description:"Controls the opening and closing of the modal",name:"isOpen",required:!1,type:{name:"boolean | undefined"}},onToggle:{defaultValue:null,description:"A callback to update ascendant state when a modal by and action inside it",name:"onToggle",required:!0,type:{name:"((isOpen: boolean) => void) | undefined"}},labelledBy:{defaultValue:null,description:"",name:"labelledBy",required:!0,type:{name:"string | null"}},closeBtnOnClick:{defaultValue:null,description:"",name:"closeBtnOnClick",required:!1,type:{name:"MouseEventHandler<HTMLButtonElement> | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../pp-organisms/s-pp-modal/src/PpModal.tsx#PpModal"]={docgenInfo:PpModal.__docgenInfo,name:"PpModal",path:"../../pp-organisms/s-pp-modal/src/PpModal.tsx#PpModal"})}catch(__react_docgen_typescript_loader_error){}},"../../pp-organisms/s-pp-modal/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("../../pp-organisms/s-pp-modal/src/PpModal.tsx").Z},"../../pp-utils/s-pp-build-promotions-link/src/getAbandonedCartLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getAbandonedCartLink});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),getCommonParameters=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts"),getPurchaseServiceLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts");const _excluded=["msPurchaseUrl"];const src_getAbandonedCartLink=function getAbandonedCartLink(_ref){let{msPurchaseUrl}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);const searchParams=(0,getCommonParameters.Z)(props);return(0,getPurchaseServiceLink.Z)({msPurchaseUrl,searchParams,endpoint:"savePurchasePreferences"})}},"../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCommonParameters});var isFilledPpOffersStore=__webpack_require__("../../utils/s-type-predicates/src/isFilledPpOffersStore/index.ts");const src_getCommonParameters=function getCommonParameters(props){if(!(0,isFilledPpOffersStore.Z)(props))throw new Error("Offer not selected");const{productNumber,promotionNumber,saleCode,thankYouMailTemplate,approveDebtClaim,contentId}=props,optionalParams={utmCampaign:props.utmCampaign,utmContent:props.utmContent,utmMedium:props.utmMedium,utmSource:props.utmSource,couponId:props.couponId,personalCouponId:props.personalCouponId},params=new URLSearchParams({contentId,productId:productNumber.toString(),saleCode:saleCode.toString(),promotionNumber:promotionNumber.toString(),approveDebtClaim:String(!0===approveDebtClaim),thankYouEmailTemplate:thankYouMailTemplate,cgtype:"heb"});return Object.keys(optionalParams).forEach((name=>{const value=optionalParams[name];value&&params.append(name,value.toString())})),params}},"../../pp-utils/s-pp-build-promotions-link/src/getCouponLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCouponLink});var objectWithoutProperties=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),getCommonParameters=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getCommonParameters/index.ts"),getPurchaseServiceLink=__webpack_require__("../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts");const _excluded=["msPurchaseUrl","couponId","personalCouponId","token"];const src_getCouponLink=function getCouponLink(_ref){let{msPurchaseUrl,couponId,personalCouponId,token}=_ref,props=(0,objectWithoutProperties.Z)(_ref,_excluded);const searchParams=(0,getCommonParameters.Z)(props);return personalCouponId?searchParams.append("personalCouponId",personalCouponId):couponId&&token&&(searchParams.append("couponId",couponId),searchParams.append("token",token)),(0,getPurchaseServiceLink.Z)({msPurchaseUrl,searchParams,endpoint:"okCoupon"})}},"../../pp-utils/s-pp-build-promotions-link/src/getPurchaseServiceLink/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getPurchaseServiceLink});const src_getPurchaseServiceLink=function getPurchaseServiceLink(_ref){let{endpoint,msPurchaseUrl,searchParams}=_ref;if(!msPurchaseUrl)throw new Error("A URL for the purchase microservice is required");return"".concat(msPurchaseUrl,"/").concat(endpoint,"?").concat(searchParams.toString())}},"../../pp-utils/s-pp-build-promotions-link/src/getUtmQueryParameters/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getUtmQueryParameters});var discardNullableValues=__webpack_require__("../../utils/s-common-utils/src/discardNullableValues/index.ts");const src_getUtmQueryParameters=function getUtmQueryParameters(query){const{htm_source,htm_medium,htm_campaign,htm_content,utm_source,utm_medium,utm_campaign,utm_content}=query;return(0,discardNullableValues.Z)({utmCampaign:htm_campaign||utm_campaign,utmContent:htm_content||utm_content,utmMedium:htm_medium||utm_medium,utmSource:htm_source||utm_source})}},"../../pp-utils/s-pp-routing-utils/src/generatePath/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_generatePath});var defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.21.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const src_generatePath=function generatePath(_ref){let{nextStepName,asPath,searchParams,currentQueryParams,ignoreCurrentSearchParams=!1,extendQueryParams={}}=_ref;const[,queryPartFromPath]=asPath.split(/\?(.+)/),extendSearchParams=null==searchParams?void 0:searchParams.toString(),segmentPath=currentQueryParams.pathSegment?"/".concat(currentQueryParams.pathSegment):"";return{asPath:"".concat(segmentPath,"/").concat(nextStepName).concat(queryPartFromPath&&!ignoreCurrentSearchParams?"?".concat(queryPartFromPath).concat(extendSearchParams?"&".concat(extendSearchParams):""):extendSearchParams?"?".concat(extendSearchParams):""),pathName:{pathname:"".concat(segmentPath,"/").concat(nextStepName),query:_objectSpread(_objectSpread({},currentQueryParams),extendQueryParams)}}}},"../../pp-utils/s-pp-routing-utils/src/getCurrentStep/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getCurrentStep});const src_getCurrentStep=function getCurrentStep(currentStepName,steps){if(!currentStepName||"string"!=typeof currentStepName)throw new Error("Step name isn't valid");if(null==steps||!steps.length)throw new Error("Steps is required array");const currentStepIndex=steps.findIndex((step=>step.name===currentStepName));if(currentStepIndex<0)throw new Error("Invalid current step");return{currentStep:steps[currentStepIndex],currentStepIndex}}},"../../pp-utils/s-pp-routing-utils/src/getFirstStep/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_getFirstStep});const src_getFirstStep=function getFirstStep(steps){if(!Array.isArray(steps)||!steps.length)throw new Error('A "steps" array is required');return steps[0]}},"../../utils/s-cookie-utils/src/setSessionCookie/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_setSessionCookie});var src=__webpack_require__("../../shared/s-consts/src/index.ts");const src_setSessionCookie=function setSessionCookie(cookieName,value){document.cookie="".concat(cookieName,"=").concat(value,"; path=/; domain=.").concat(src.Kn,";")}},"../../utils/s-generate-subscription-text/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src});const subscriptions={239:"Haaretz",243:"הארץ",273:"TheMarker",274:"משולב"};const src=function generateSubscriptionText(periodCalc,productNumber){return"מינוי ".concat(subscriptions[productNumber]," במסלול תשלום ").concat(periodCalc<12?"חודשי":"שנתי")}},"../../utils/s-type-predicates/src/isCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isCoupon});const src_isCoupon=function isCoupon(pageData){return pageData instanceof Object&&!(!pageData.personalCouponId&&!pageData.couponId)}},"../../utils/s-type-predicates/src/isFilledPpOffersStore/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isFilledPpOffersStore});const keysMap={periodCalc:!0,prices:!0,productNumber:!0,promotionNumber:!0,saleCode:!0,thankYouMailTemplate:!0,contentId:!0,paymentType:!0};const src_isFilledPpOffersStore=function isFilledPpOffersStore(store){if(!(store instanceof Object))return!1;for(const key of Object.keys(keysMap))if(!store[key])return!1;return!0}},"../../utils/s-type-predicates/src/isFreeCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isFreeCoupon});const src_isFreeCoupon=function isFreeCoupon(couponOffer){return couponOffer instanceof Object&&"FREE"===couponOffer.paymentType}},"../../utils/s-type-predicates/src/isPersonalCoupon/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>src_isPersonalCoupon});const src_isPersonalCoupon=function isPersonalCoupon(pageData){return pageData instanceof Object&&!!pageData.personalCouponId}}}]);